{
  if (lineSeparator == null) {
    lineSeparator=AccessController.doPrivileged(new PriviAction<String>("line.separator"));
  }
  StringBuilder buffer=new StringBuilder(200);
  OutputStreamWriter writer=new OutputStreamWriter(out,"ISO8859_1");
  if (comments != null) {
    writeComments(writer,comments);
  }
  writer.write('#');
  writer.write(new Date().toString());
  writer.write(lineSeparator);
  for (  Map.Entry<Object,Object> entry : entrySet()) {
    String key=(String)entry.getKey();
    dumpString(buffer,key,true,true);
    buffer.append('=');
    dumpString(buffer,(String)entry.getValue(),false,true);
    buffer.append(lineSeparator);
    writer.write(buffer.toString());
    buffer.setLength(0);
  }
  writer.flush();
}
