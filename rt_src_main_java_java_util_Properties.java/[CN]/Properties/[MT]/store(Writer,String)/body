{
  if (lineSeparator == null) {
    lineSeparator=AccessController.doPrivileged(new PriviAction<String>("line.separator"));
  }
  if (comments != null) {
    writeComments(writer,comments);
  }
  writer.write('#');
  writer.write(new Date().toString());
  writer.write(lineSeparator);
  StringBuilder buffer=new StringBuilder(200);
  for (  Map.Entry<Object,Object> entry : entrySet()) {
    String key=(String)entry.getKey();
    dumpString(buffer,key,true,false);
    buffer.append('=');
    dumpString(buffer,(String)entry.getValue(),false,false);
    buffer.append(lineSeparator);
    writer.write(buffer.toString());
    buffer.setLength(0);
  }
  writer.flush();
}
