{
  config.getLogger().debug("Code signing using identity '%s' with fingerprint %s",identity.getName(),identity.getFingerprint());
  List<Object> args=new ArrayList<Object>();
  args.add("-f");
  args.add("-s");
  args.add(identity.getFingerprint());
  if (entitlementsPList != null) {
    args.add("--entitlements");
    args.add(entitlementsPList);
  }
  args.add(appDir);
  new Executor(config.getLogger(),"codesign").addEnv("CODESIGN_ALLOCATE",ToolchainUtil.findXcodeCommand("codesign_allocate","iphoneos")).args(args).exec();
}
