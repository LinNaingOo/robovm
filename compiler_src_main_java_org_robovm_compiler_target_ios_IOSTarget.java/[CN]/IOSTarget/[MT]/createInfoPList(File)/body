{
  NSDictionary dict=new NSDictionary();
  if (infoPListDict != null) {
    for (    String key : infoPListDict.allKeys()) {
      dict.put(key,infoPListDict.objectForKey(key));
    }
  }
 else {
    dict.put("CFBundleVersion","1.0");
    dict.put("CFBundleExecutable",config.getExecutableName());
    dict.put("CFBundleName",config.getExecutableName());
    dict.put("CFBundleIdentifier",getBundleId());
    dict.put("CFBundlePackageType","APPL");
    dict.put("LSRequiresIPhoneOS",true);
    NSObject supportedDeviceFamilies=sdk.getDefaultProperty("SUPPORTED_DEVICE_FAMILIES");
    if (supportedDeviceFamilies != null) {
      NSArray families=null;
      if (supportedDeviceFamilies instanceof NSString) {
        NSString defFamilies=(NSString)supportedDeviceFamilies;
        String[] parts=defFamilies.toString().split(",");
        families=new NSArray(parts.length);
        for (int i=0; i < families.count(); i++) {
          families.setValue(i,new NSNumber(parts[i].trim()));
        }
      }
 else {
        NSArray defFamilies=(NSArray)supportedDeviceFamilies;
        families=new NSArray(defFamilies.count());
        for (int i=0; i < families.count(); i++) {
          families.setValue(i,new NSNumber(defFamilies.objectAtIndex(i).toString()));
        }
      }
      dict.put("UIDeviceFamily",families);
    }
    dict.put("UISupportedInterfaceOrientations",new NSArray(new NSString("UIInterfaceOrientationPortrait"),new NSString("UIInterfaceOrientationLandscapeLeft"),new NSString("UIInterfaceOrientationLandscapeRight"),new NSString("UIInterfaceOrientationPortraitUpsideDown")));
    dict.put("UISupportedInterfaceOrientations~ipad",new NSArray(new NSString("UIInterfaceOrientationPortrait"),new NSString("UIInterfaceOrientationLandscapeLeft"),new NSString("UIInterfaceOrientationLandscapeRight"),new NSString("UIInterfaceOrientationPortraitUpsideDown")));
    dict.put("UIRequiredDeviceCapabilities",new NSArray(new NSString("armv7")));
  }
  dict.put("DTPlatformName",sdk.getPlatformName());
  dict.put("DTSDKName",sdk.getCanonicalName());
  if (dict.objectForKey("MinimumOSVersion") == null) {
    dict.put("MinimumOSVersion","6.0");
  }
  customizeInfoPList(dict);
  File tmpInfoPlist=new File(config.getTmpDir(),"Info.plist");
  PropertyListParser.saveAsBinary(dict,tmpInfoPlist);
  config.getLogger().debug("Installing Info.plist to %s",dir);
  FileUtils.copyFile(tmpInfoPlist,new File(dir,tmpInfoPlist.getName()));
}
