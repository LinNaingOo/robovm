{
  if (null != refval) {
    String ref=null;
    StringTokenizer tokenizer=new StringTokenizer(refval);
    boolean hasMore=tokenizer.hasMoreTokens();
    DTM dtm=xctxt.getDTM(docContext);
    while (hasMore) {
      ref=tokenizer.nextToken();
      hasMore=tokenizer.hasMoreTokens();
      if ((null != usedrefs) && usedrefs.contains(ref)) {
        ref=null;
        continue;
      }
      int node=dtm.getElementById(ref);
      if (DTM.NULL != node)       nodeSet.addNodeInDocOrder(node,xctxt);
      if ((null != ref) && (hasMore || mayBeMore)) {
        if (null == usedrefs)         usedrefs=new StringVector();
        usedrefs.addElement(ref);
      }
    }
  }
  return usedrefs;
}
