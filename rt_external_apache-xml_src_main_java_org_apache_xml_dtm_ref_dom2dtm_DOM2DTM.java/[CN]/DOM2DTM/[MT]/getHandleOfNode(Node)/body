{
  if (null != node) {
    if ((m_root == node) || (m_root.getNodeType() == DOCUMENT_NODE && m_root == node.getOwnerDocument()) || (m_root.getNodeType() != DOCUMENT_NODE && m_root.getOwnerDocument() == node.getOwnerDocument())) {
      for (Node cursor=node; cursor != null; cursor=(cursor.getNodeType() != ATTRIBUTE_NODE) ? cursor.getParentNode() : ((org.w3c.dom.Attr)cursor).getOwnerElement()) {
        if (cursor == m_root)         return getHandleFromNode(node);
      }
    }
  }
  return DTM.NULL;
}
