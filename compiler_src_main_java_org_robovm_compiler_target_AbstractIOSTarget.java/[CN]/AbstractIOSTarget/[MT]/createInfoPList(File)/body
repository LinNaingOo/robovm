{
  NSDictionary dict=new NSDictionary();
  if (infoPListDict != null) {
    for (    String key : infoPListDict.allKeys()) {
      dict.put(key,infoPListDict.objectForKey(key));
    }
  }
 else {
    dict.put("CFBundleExecutable",config.getExecutableName());
    dict.put("CFBundleName",config.getExecutableName());
    String identifier=config.getMainClass() != null ? config.getMainClass() : config.getExecutableName();
    dict.put("CFBundleIdentifier",identifier);
    dict.put("CFBundlePackageType","APPL");
    dict.put("LSRequiresIPhoneOS",true);
    if (sdk.getDefaultProperty("SUPPORTED_DEVICE_FAMILIES") != null) {
      NSArray defFamilies=(NSArray)sdk.getDefaultProperty("SUPPORTED_DEVICE_FAMILIES");
      NSArray families=new NSArray(defFamilies.count());
      for (int i=0; i < families.count(); i++) {
        families.setValue(i,new NSNumber(defFamilies.objectAtIndex(i).toString()));
      }
      dict.put("UIDeviceFamily",families);
    }
    dict.put("UISupportedInterfaceOrientations",new NSArray(new NSString("UIInterfaceOrientationPortrait"),new NSString("UIInterfaceOrientationLandscapeLeft"),new NSString("UIInterfaceOrientationLandscapeRight"),new NSString("UIInterfaceOrientationPortraitUpsideDown")));
    dict.put("UISupportedInterfaceOrientations~ipad",new NSArray(new NSString("UIInterfaceOrientationPortrait"),new NSString("UIInterfaceOrientationLandscapeLeft"),new NSString("UIInterfaceOrientationLandscapeRight"),new NSString("UIInterfaceOrientationPortraitUpsideDown")));
    dict.put("UIRequiredDeviceCapabilities",new NSArray(new NSString("armv7")));
  }
  dict.put("DTPlatformName",sdk.getDefaultProperty("PLATFORM_NAME"));
  dict.put("DTPlatformVersion",sdk.getVersion());
  dict.put("DTSDKName",sdk.getCanonicalName());
  customizeInfoPList(dict);
  File tmpInfoPlist=new File(config.getTmpDir(),"Info.plist");
  PropertyListParser.saveAsBinary(dict,tmpInfoPlist);
  config.getLogger().debug("Installing Info.plist to %s",dir);
  FileUtils.copyFile(tmpInfoPlist,new File(dir,tmpInfoPlist.getName()));
}
