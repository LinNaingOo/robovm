{
  Pattern pat=Pattern.compile("XX");
  Matcher m=pat.matcher("Today is XX-XX-XX ...");
  StringBuffer sb=new StringBuffer();
  for (int i=0; m.find(); i++) {
    m.appendReplacement(sb,new Integer(i * 10 + i).toString());
  }
  m.appendTail(sb);
  assertEquals("Today is 0-11-22 ...",sb.toString());
}
