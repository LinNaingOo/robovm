{
  OutputStream out=null;
  try {
    out=new FileOutputStream(outFile);
    new SootClassCompiler().compile(clazz,out);
  }
 catch (  Throwable t) {
    FileUtils.deleteQuietly(outFile);
    if (t instanceof IOException) {
      throw (IOException)t;
    }
    if (t instanceof RuntimeException) {
      throw (RuntimeException)t;
    }
    throw new RuntimeException(t);
  }
 finally {
    IOUtils.closeQuietly(out);
  }
}
