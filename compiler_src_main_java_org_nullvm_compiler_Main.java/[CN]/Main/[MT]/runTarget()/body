{
  Map<String,String> env=new HashMap<String,String>();
  env.putAll(EnvironmentUtils.getProcEnvironment());
  String ldLibraryPath=env.get("LD_LIBRARY_PATH");
  ldLibraryPath=ldLibraryPath == null ? "" : ":" + ldLibraryPath;
  if (os == OS.linux) {
    env.put("LD_LIBRARY_PATH",homeLibOsArch.getAbsolutePath() + ldLibraryPath);
  }
  if (os == OS.darwin) {
    env.put("DYLD_LIBRARY_PATH",homeLibOsArch.getAbsolutePath() + ldLibraryPath);
  }
  try {
    execWithEnv(output,env,new File(output,target).getAbsolutePath());
  }
 catch (  ExecuteException e) {
    System.exit(e.getExitValue());
  }
}
