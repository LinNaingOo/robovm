{
  List<String> relFiles=new ArrayList<String>(files.size());
  for (  File f : files) {
    relFiles.add(f.getAbsolutePath().substring(wd.getAbsolutePath().length() + 1));
  }
  String arPath="ar";
  if (arBin != null) {
    arPath=arBin.getAbsolutePath();
  }
  outFile.getParentFile().mkdirs();
  List<List<String>> parts=new ArrayList<List<String>>();
  parts.add(relFiles);
  while (true) {
    outFile.delete();
    try {
      for (      List<String> l : parts) {
        exec(wd,arPath,"rcs",outFile,l);
      }
      break;
    }
 catch (    IOException e) {
      if (e.getMessage() != null && e.getMessage().contains("Argument list too long")) {
        if (verbose) {
          stdout.printf("Got 'Argument list too long' error when running ar. " + "Will try again using %d calls to ar.\n",parts.size() * 2);
        }
        List<List<String>> oldParts=parts;
        parts=new ArrayList<List<String>>();
        for (        List<String> l : oldParts) {
          int size=l.size();
          if (size > 1) {
            parts.add(l.subList(0,size / 2));
            parts.add(l.subList(size / 2,size));
          }
 else {
            parts.add(l);
          }
        }
        if (parts.size() == relFiles.size()) {
          throw e;
        }
      }
 else {
        throw e;
      }
    }
  }
}
