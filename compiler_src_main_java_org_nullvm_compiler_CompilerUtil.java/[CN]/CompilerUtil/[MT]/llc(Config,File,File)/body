{
  String llcPath="llc";
  if (config.getLlvmBinDir() != null) {
    llcPath=new File(config.getLlvmBinDir(),"llc").getAbsolutePath();
  }
  ArrayList<String> opts=new ArrayList<String>();
  opts.add("-march=" + config.getArch().getLlvmName());
  if (config.getCpu() != null) {
    opts.add("-mcpu=" + config.getCpu());
  }
  opts.add("-ffunction-sections");
  opts.add("-fdata-sections");
  outFile.getParentFile().mkdirs();
  exec(config,llcPath,opts,"-o=" + outFile.toString(),inFile);
}
