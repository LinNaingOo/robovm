{
  if (factoryClassName == null) {
    throw new DatatypeConfigurationException("factoryClassName cannot be null.");
  }
  if (classLoader == null) {
    classLoader=SecuritySupport.getContextClassLoader();
  }
  try {
    return (DatatypeFactory)FactoryFinder.newInstance(factoryClassName,classLoader);
  }
 catch (  FactoryFinder.ConfigurationError e) {
    throw new DatatypeConfigurationException(e.getMessage(),e.getException());
  }
}
