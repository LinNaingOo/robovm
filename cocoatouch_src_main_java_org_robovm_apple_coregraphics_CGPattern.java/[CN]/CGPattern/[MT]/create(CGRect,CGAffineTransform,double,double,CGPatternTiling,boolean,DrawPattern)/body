{
  long infoId=CGPattern.infoId.getAndIncrement();
  CGPatternCallbacks callbacks=new CGPatternCallbacks();
  callbacks.setDrawPattern(new FunctionPtr(cbDrawPattern));
  callbacks.setReleaseInfo(new FunctionPtr(cbReleaseInfo));
  CGPattern result=create(infoId,bounds,matrix,xStep,yStep,tiling,isColored,callbacks);
  if (result != null) {
synchronized (infos) {
      infos.put(infoId,drawPattern);
    }
  }
  return result;
}
