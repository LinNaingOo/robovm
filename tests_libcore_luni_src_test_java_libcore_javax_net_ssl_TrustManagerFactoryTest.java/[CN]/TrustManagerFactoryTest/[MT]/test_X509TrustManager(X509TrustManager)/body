{
  for (  String keyType : KEY_TYPES) {
    X509Certificate[] issuers=tm.getAcceptedIssuers();
    assertNotNull(issuers);
    assertTrue(issuers.length > 1);
    assertNotSame(issuers,tm.getAcceptedIssuers());
    boolean defaultTrustManager=issuers.length > (StandardNames.IS_RI ? 1 : 2) * KEY_TYPES.length;
    String keyAlgName=TestKeyStore.keyAlgorithm(keyType);
    String sigAlgName=TestKeyStore.signatureAlgorithm(keyType);
    PrivateKeyEntry pke=getTestKeyStore().getPrivateKey(keyAlgName,sigAlgName);
    X509Certificate[] chain=(X509Certificate[])pke.getCertificateChain();
    if (defaultTrustManager) {
      try {
        tm.checkClientTrusted(chain,keyType);
        fail();
      }
 catch (      CertificateException expected) {
      }
      try {
        tm.checkServerTrusted(chain,keyType);
        fail();
      }
 catch (      CertificateException expected) {
      }
    }
 else {
      tm.checkClientTrusted(chain,keyType);
      tm.checkServerTrusted(chain,keyType);
    }
  }
}
