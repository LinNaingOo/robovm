{
  int i;
  int sz=100;
  LinkedHashMap lhm=new LinkedHashMap();
  for (i=0; i < sz; i++) {
    Integer ii=new Integer(i);
    lhm.put(ii,ii.toString());
  }
  Set s1=lhm.entrySet();
  Iterator it1=s1.iterator();
  assertTrue("Returned set of incorrect size 1",lhm.size() == s1.size());
  for (i=0; it1.hasNext(); i++) {
    Map.Entry m=(Map.Entry)it1.next();
    Integer jj=(Integer)m.getKey();
    assertTrue("Returned incorrect entry set 1",jj.intValue() == i);
  }
  LinkedHashMap lruhm=new LinkedHashMap(200,.75f,true);
  for (i=0; i < sz; i++) {
    Integer ii=new Integer(i);
    lruhm.put(ii,ii.toString());
  }
  Set s3=lruhm.entrySet();
  Iterator it3=s3.iterator();
  assertTrue("Returned set of incorrect size 2",lruhm.size() == s3.size());
  for (i=0; i < sz && it3.hasNext(); i++) {
    Map.Entry m=(Map.Entry)it3.next();
    Integer jj=(Integer)m.getKey();
    assertTrue("Returned incorrect entry set 2",jj.intValue() == i);
  }
  int p=0;
  for (i=0; i < sz; i+=2) {
    String ii=(String)lruhm.get(new Integer(i));
    p=p + Integer.parseInt(ii);
  }
  assertEquals("invalid sum of even numbers",2450,p);
  Set s2=lruhm.entrySet();
  Iterator it2=s2.iterator();
  assertTrue("Returned set of incorrect size 3",lruhm.size() == s2.size());
  for (i=1; i < sz && it2.hasNext(); i+=2) {
    Map.Entry m=(Map.Entry)it2.next();
    Integer jj=(Integer)m.getKey();
    assertTrue("Returned incorrect entry set 3",jj.intValue() == i);
  }
  for (i=0; i < sz && it2.hasNext(); i+=2) {
    Map.Entry m=(Map.Entry)it2.next();
    Integer jj=(Integer)m.getKey();
    assertTrue("Returned incorrect entry set 4",jj.intValue() == i);
  }
  assertTrue("Entries left to iterate on",!it2.hasNext());
}
