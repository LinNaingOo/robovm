{
  Socks4Message reply=new Socks4Message();
  int bytesRead=0;
  while (bytesRead < Socks4Message.REPLY_LENGTH) {
    int count=getInputStream().read(reply.getBytes(),bytesRead,Socks4Message.REPLY_LENGTH - bytesRead);
    if (-1 == count) {
      break;
    }
    bytesRead+=count;
  }
  if (Socks4Message.REPLY_LENGTH != bytesRead) {
    throw new SocketException(Messages.getString("luni.10"));
  }
  return reply;
}
