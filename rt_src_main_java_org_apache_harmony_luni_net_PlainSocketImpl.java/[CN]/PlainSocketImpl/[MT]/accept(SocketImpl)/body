{
  if (NetUtil.usingSocks(proxy)) {
    ((PlainSocketImpl)newImpl).socksBind();
    ((PlainSocketImpl)newImpl).socksAccept();
    return;
  }
  try {
    if (newImpl instanceof PlainSocketImpl) {
      PlainSocketImpl newPlainSocketImpl=(PlainSocketImpl)newImpl;
      netImpl.acceptStreamSocket(fd,newImpl,newPlainSocketImpl.getFileDescriptor(),receiveTimeout);
      newPlainSocketImpl.setLocalport(getLocalPort());
    }
 else {
      if (null == fdField) {
        fdField=getSocketImplField("fd");
      }
      FileDescriptor newFd=(FileDescriptor)fdField.get(newImpl);
      netImpl.acceptStreamSocket(fd,newImpl,newFd,receiveTimeout);
      if (null == localportField) {
        localportField=getSocketImplField("localport");
      }
      localportField.setInt(newImpl,getLocalPort());
    }
  }
 catch (  InterruptedIOException e) {
    throw new SocketTimeoutException(e.getMessage());
  }
catch (  IllegalAccessException e) {
  }
}
