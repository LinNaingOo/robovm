{
synchronized (fd) {
    if (fd.valid()) {
      if ((netImpl.getSocketFlags() & FLAG_SHUTDOWN) != 0) {
        try {
          shutdownOutput();
        }
 catch (        Exception e) {
        }
      }
      netImpl.socketClose(fd);
      fd=new FileDescriptor();
    }
  }
}
