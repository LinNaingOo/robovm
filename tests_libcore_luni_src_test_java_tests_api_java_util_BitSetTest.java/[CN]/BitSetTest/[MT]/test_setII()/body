{
  BitSet bitset=new BitSet(30);
  bitset.set(29,29);
  BitSet bs=new BitSet(16);
  bs.set(5);
  bs.set(15);
  bs.set(7,11);
  assertEquals("{5, 7, 8, 9, 10, 15}",bs.toString());
  for (int i=16; i < bs.size(); i++) {
    assertFalse("Shouldn't have set bit " + i,bs.get(i));
  }
  bs=new BitSet(16);
  bs.set(7,64);
  assertEquals("Failed to grow BitSet",64,bs.size());
  for (int i=0; i < 7; i++) {
    assertFalse("Shouldn't have set bit " + i,bs.get(i));
  }
  for (int i=7; i < 64; i++) {
    assertTrue("Failed to set bit " + i,bs.get(i));
  }
  assertFalse("Shouldn't have set bit 64",bs.get(64));
  bs=new BitSet(32);
  bs.set(0,64);
  for (int i=0; i < 64; i++) {
    assertTrue("Failed to set bit " + i,bs.get(i));
  }
  assertFalse("Shouldn't have set bit 64",bs.get(64));
  bs=new BitSet(32);
  bs.set(0,65);
  for (int i=0; i < 65; i++) {
    assertTrue("Failed to set bit " + i,bs.get(i));
  }
  assertFalse("Shouldn't have set bit 65",bs.get(65));
  bs=new BitSet(128);
  bs.set(7);
  bs.set(110);
  bs.set(9,74);
  for (int i=0; i < 9; i++) {
    if (i == 7) {
      assertTrue("Shouldn't have flipped bit " + i,bs.get(i));
    }
 else {
      assertFalse("Shouldn't have set bit " + i,bs.get(i));
    }
  }
  for (int i=9; i < 74; i++) {
    assertTrue("Failed to set bit " + i,bs.get(i));
  }
  for (int i=74; i < bs.size(); i++) {
    if (i == 110) {
      assertTrue("Shouldn't have flipped bit " + i,bs.get(i));
    }
 else {
      assertFalse("Shouldn't have set bit " + i,bs.get(i));
    }
  }
  bs=new BitSet(256);
  bs.set(7);
  bs.set(255);
  bs.set(9,219);
  for (int i=0; i < 9; i++) {
    if (i == 7) {
      assertTrue("Shouldn't have set flipped " + i,bs.get(i));
    }
 else {
      assertFalse("Shouldn't have set bit " + i,bs.get(i));
    }
  }
  for (int i=9; i < 219; i++) {
    assertTrue("failed to set bit " + i,bs.get(i));
  }
  for (int i=219; i < 255; i++) {
    assertFalse("Shouldn't have set bit " + i,bs.get(i));
  }
  assertTrue("Shouldn't have flipped bit 255",bs.get(255));
  bs=new BitSet(10);
  try {
    bs.set(-1,3);
    fail();
  }
 catch (  IndexOutOfBoundsException expected) {
  }
  try {
    bs.set(2,-1);
    fail();
  }
 catch (  IndexOutOfBoundsException expected) {
  }
  bs.set(2,2);
  assertFalse("Bit got set incorrectly ",bs.get(2));
  try {
    bs.set(4,2);
    fail();
  }
 catch (  IndexOutOfBoundsException expected) {
  }
}
