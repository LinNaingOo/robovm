{
  KeyFactory factory=null;
  try {
    factory=KeyFactory.getInstance(TEST_KEYFACTORY_NAME);
  }
 catch (  NoSuchAlgorithmException e) {
    fail("unexpected exception: " + e);
  }
  assertNotNull(factory);
{
    Key[] keys={new TestPrivateKey(),new TestPublicKey()};
    Class[] translated={TestPublicKey.class,TestPrivateKey.class};
    for (int i=0; i < keys.length; i++) {
      Key key=keys[i];
      Class translate=translated[i];
      try {
        Key translateKey=factory.translateKey(key);
        assertNotNull(translateKey);
        assertEquals(translate,translateKey.getClass());
      }
 catch (      InvalidKeyException e) {
        fail("unexpected exception: " + e);
      }
    }
  }
{
    Key[] keys={new AnotherKey(),null};
    Class[] exceptions={InvalidKeyException.class,NullPointerException.class};
    for (int i=0; i < keys.length; i++) {
      Key key=keys[i];
      String message="translateKey(" + (key == null ? "null" : key.toString()) + ")";
      exceptionThrown=false;
      try {
        factory.translateKey(key);
      }
 catch (      Exception e) {
        checkException(message,e,exceptions[i]);
      }
 finally {
        checkException(message,null,exceptions[i]);
      }
    }
  }
}
