{
synchronized (lock) {
    if (!exitCodeAvailable) {
      throw new IllegalThreadStateException();
    }
    return exitCode;
  }
}
