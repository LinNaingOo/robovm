{
  ArrayList<VisibilityAnnotationTag> va_tags=new ArrayList<VisibilityAnnotationTag>();
  for (  Tag t : h.getTags()) {
    if (t instanceof VisibilityAnnotationTag) {
      VisibilityAnnotationTag vat=(VisibilityAnnotationTag)t;
      if (vat.getVisibility() == visibility)       va_tags.add(vat);
    }
  }
  if (va_tags.isEmpty()) {
    VisibilityAnnotationTag vat=new VisibilityAnnotationTag(visibility);
    h.addTag(vat);
    return vat;
  }
  return (va_tags.get(0));
}
