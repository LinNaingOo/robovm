{
  if (!visited.contains(node)) {
    visited.add(node);
    for (    Node child : node.strongEdges) {
      visitReachableNodes(child,visited);
    }
    for (    Node child : node.weakEdges) {
      if (treeShakerMode == TreeShakerMode.conservative && child instanceof MethodNode) {
        MethodNode mnode=(MethodNode)child;
        if (!mnode.isWeaklyLinked()) {
          visitReachableNodes(child,visited);
        }
      }
 else       if (treeShakerMode == TreeShakerMode.aggressive) {
        if (child instanceof MethodNode) {
          MethodNode mnode=(MethodNode)child;
          if (mnode.isStronglyLinked() || (!mnode.isWeaklyLinked() && "<init>".equals(mnode.name))) {
            visitReachableNodes(child,visited);
          }
        }
      }
 else {
        visitReachableNodes(child,visited);
      }
    }
  }
}
