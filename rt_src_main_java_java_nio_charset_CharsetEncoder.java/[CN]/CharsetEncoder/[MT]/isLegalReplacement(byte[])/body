{
  if (decoder == null) {
    decoder=cs.newDecoder();
  }
  CodingErrorAction malform=decoder.malformedInputAction();
  CodingErrorAction unmap=decoder.unmappableCharacterAction();
  decoder.onMalformedInput(CodingErrorAction.REPORT);
  decoder.onUnmappableCharacter(CodingErrorAction.REPORT);
  ByteBuffer in=ByteBuffer.wrap(repl);
  CharBuffer out=CharBuffer.allocate((int)(repl.length * decoder.maxCharsPerByte()));
  CoderResult result=decoder.decode(in,out,true);
  decoder.onMalformedInput(malform);
  decoder.onUnmappableCharacter(unmap);
  return !result.isError();
}
