{
  if (envp == null) {
    return EnvironmentUtils.getProcEnvironment();
  }
  Map<String,String> result=new HashMap<String,String>();
  for (int i=0; i < envp.length; i++) {
    int index=envp[i].indexOf('=');
    if (index != -1) {
      result.put(envp[i].substring(0,index),envp[i].substring(index + 1));
    }
  }
  return result;
}
