{
  TreeSet<Clazz> compileQueue=getRootClasses();
  Set<Clazz> linkClasses=new HashSet<Clazz>();
  while (!compileQueue.isEmpty() && !Thread.currentThread().isInterrupted()) {
    Clazz clazz=compileQueue.pollFirst();
    if (!linkClasses.contains(clazz)) {
      compile(clazz,compileQueue,linkClasses);
      linkClasses.add(clazz);
    }
  }
  if (Thread.currentThread().isInterrupted()) {
    return;
  }
  if (linkClasses.contains(config.getClazzes().load(TRUSTED_CERTIFICATE_STORE_CLASS))) {
    if (config.getCacerts() != null) {
      config.addResourcesPath(config.getClazzes().createResourcesBootclasspathPath(config.getHome().getCacertsPath(config.getCacerts())));
    }
  }
  linker.link(linkClasses);
}
