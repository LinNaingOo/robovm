{
  cache.close();
  cache=DiskLruCache.open(cacheDir,appVersion,2,10);
  set("A","a","aaa");
  set("B","bb","bbbb");
  assertEquals(10,cache.size());
  set("C","c","c");
  cache.flush();
  assertEquals(8,cache.size());
  assertAbsent("A");
  assertValue("B","bb","bbbb");
  assertValue("C","c","c");
  set("D","d","d");
  cache.flush();
  assertEquals(10,cache.size());
  assertAbsent("A");
  assertValue("B","bb","bbbb");
  assertValue("C","c","c");
  assertValue("D","d","d");
  set("E","eeee","eeee");
  cache.flush();
  assertEquals(10,cache.size());
  assertAbsent("A");
  assertAbsent("B");
  assertAbsent("C");
  assertValue("D","d","d");
  assertValue("E","eeee","eeee");
}
