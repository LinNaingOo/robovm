{
  cache.close();
  File cleanFile0=getCleanFile("k1",0);
  File cleanFile1=getCleanFile("k1",1);
  File dirtyFile0=getDirtyFile("k1",0);
  File dirtyFile1=getDirtyFile("k1",1);
  writeFile(cleanFile0,"A");
  writeFile(cleanFile1,"B");
  writeFile(dirtyFile0,"C");
  writeFile(dirtyFile1,"D");
  createJournal("CLEAN k1 1 1","DIRTY   k1");
  cache=DiskLruCache.open(cacheDir,appVersion,2,Integer.MAX_VALUE);
  assertFalse(cleanFile0.exists());
  assertFalse(cleanFile1.exists());
  assertFalse(dirtyFile0.exists());
  assertFalse(dirtyFile1.exists());
  assertNull(cache.get("k1"));
}
