{
  long lastJournalLength=0;
  while (true) {
    long journalLength=journalFile.length();
    set("A","a","a");
    set("B","b","b");
    if (journalLength < lastJournalLength) {
      System.out.printf("Journal compacted from %s bytes to %s bytes\n",lastJournalLength,journalLength);
      break;
    }
    lastJournalLength=journalLength;
  }
  assertValue("A","a","a");
  assertValue("B","b","b");
}
