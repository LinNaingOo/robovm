{
  if (rep != this) {
    ecr().fixParents();
  }
  BitVector invalid=new BitVector();
  invalid.or(parents);
  invalid.and(resolver.invalidIds());
  for (BitSetIterator i=invalid.iterator(); i.hasNext(); ) {
    parents.set(resolver.typeVariableForId(i.next()).id());
  }
  parents.clear(this.id);
  parents.clear(this.id());
  parents.andNot(invalid);
}
