{
  if (pos >= count) {
    return -1;
  }
  if (b == null) {
    throw new NullPointerException(Messages.getString("luni.11"));
  }
  if (offset < 0 || offset > b.length) {
    throw new ArrayIndexOutOfBoundsException(Messages.getString("luni.12",offset));
  }
  if (length < 0 || length > b.length - offset) {
    throw new ArrayIndexOutOfBoundsException(Messages.getString("luni.18",length));
  }
  if (length == 0) {
    return 0;
  }
  int copylen=count - pos < length ? count - pos : length;
  for (int i=0; i < copylen; i++) {
    b[offset + i]=(byte)buffer.charAt(pos + i);
  }
  pos+=copylen;
  return copylen;
}
