{
  CharsetDecoder decoder=Charset.forName("UTF-16").newDecoder();
  byte[] arr=encode("UTF-16","Android");
  arr=prependByteToByteArray(arr,new Integer(1).byteValue());
  int offset=1;
  ByteBuffer inBuffer=ByteBuffer.wrap(arr,offset,arr.length - offset).slice();
  CharBuffer outBuffer=CharBuffer.allocate(arr.length - offset);
  decoder.reset();
  CoderResult coderResult=decoder.decode(inBuffer,outBuffer,true);
  assertFalse(coderResult.toString(),coderResult.isError());
  decoder.flush(outBuffer);
  outBuffer.flip();
  assertEquals("Android",outBuffer.toString().trim());
}
