{
  String expectedAlgorithm=kpg.getAlgorithm().toUpperCase();
  if (StandardNames.IS_RI && expectedAlgorithm.equals("DIFFIEHELLMAN")) {
    expectedAlgorithm="DH";
  }
  assertEquals(expectedAlgorithm,k.getAlgorithm().toUpperCase());
  assertNotNull(k.getEncoded());
  assertNotNull(k.getFormat());
{
    ByteArrayOutputStream baos=new ByteArrayOutputStream(16384);
    ObjectOutputStream oos=new ObjectOutputStream(baos);
    oos.writeObject(k);
    ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
    ObjectInputStream ois=new ObjectInputStream(bais);
    Key inflatedKey=(Key)ois.readObject();
    assertEquals(k,inflatedKey);
  }
  test_KeyWithAllKeyFactories(k);
}
