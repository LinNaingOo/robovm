{
  if (null == key) {
    throw new NullPointerException();
  }
  if (!isValidKeyType(key)) {
    throw new ClassCastException();
  }
  int keyOrdinal=key.ordinal();
  if (!hasMapping[keyOrdinal]) {
    hasMapping[keyOrdinal]=true;
    mappingsCount++;
  }
  V oldValue=(V)values[keyOrdinal];
  values[keyOrdinal]=value;
  return oldValue;
}
