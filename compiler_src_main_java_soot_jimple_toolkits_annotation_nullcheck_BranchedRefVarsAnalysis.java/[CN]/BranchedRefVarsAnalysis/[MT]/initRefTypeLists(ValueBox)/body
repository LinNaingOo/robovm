{
  Value val=box.getValue();
  Type opType=null;
  if (val instanceof InstanceFieldRef) {
    InstanceFieldRef ir=(InstanceFieldRef)val;
    opType=ir.getType();
    if (opType instanceof RefType || opType instanceof ArrayType) {
      EquivalentValue eir=getEquivalentValue(ir);
      if (!refTypeInstFields.contains(eir)) {
        refTypeInstFields.add(eir);
        EquivalentValue eirbase=getEquivalentValue(ir.getBase());
        if (!refTypeInstFieldBases.contains(eirbase))         refTypeInstFieldBases.add(eirbase);
      }
    }
  }
 else   if (val instanceof StaticFieldRef) {
    StaticFieldRef sr=(StaticFieldRef)val;
    opType=sr.getType();
    if (opType instanceof RefType || opType instanceof ArrayType) {
      EquivalentValue esr=getEquivalentValue(sr);
      if (!refTypeStaticFields.contains(esr)) {
        refTypeStaticFields.add(esr);
      }
    }
  }
}
