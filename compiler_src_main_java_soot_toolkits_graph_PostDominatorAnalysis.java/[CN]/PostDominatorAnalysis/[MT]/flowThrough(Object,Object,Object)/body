{
  FlowSet in=(FlowSet)inValue;
  FlowSet out=(FlowSet)outValue;
  Unit s=(Unit)unit;
  if (isUnitEndNode(s)) {
    out.clear();
    out.add(s);
  }
 else {
    FlowSet domsOfSuccs=allNodes.clone();
    Iterator succsIt=g.getSuccsOf(s).iterator();
    while (succsIt.hasNext()) {
      Unit succ=(Unit)succsIt.next();
      FlowSet next=(FlowSet)unitToBeforeFlow.get(succ);
      in.intersection(next,in);
    }
    out.intersection(in,out);
    out.add(s);
  }
}
