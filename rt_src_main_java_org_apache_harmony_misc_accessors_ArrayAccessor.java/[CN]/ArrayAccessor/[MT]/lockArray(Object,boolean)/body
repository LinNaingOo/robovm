{
synchronized (objectLockMap) {
    if (objectLockMap.get(array) != null) {
      throw new RuntimeException(Messages.getString("misc.2"));
    }
    long addr=0;
    if (longLock) {
      if (array instanceof byte[]) {
        addr=staticPinByteArray((byte[])array);
      }
 else       if (array instanceof char[]) {
        addr=staticPinCharArray((char[])array);
      }
 else       if (array instanceof int[]) {
        addr=staticPinIntArray((int[])array);
      }
 else       if (array instanceof short[]) {
        addr=staticPinShortArray((short[])array);
      }
 else       if (array instanceof long[]) {
        addr=staticPinLongArray((long[])array);
      }
 else       if (array instanceof float[]) {
        addr=staticPinFloatArray((float[])array);
      }
 else       if (array instanceof double[]) {
        addr=staticPinDoubleArray((double[])array);
      }
    }
 else {
      addr=staticLockArray(array);
    }
    if (addr == 0) {
      throw new RuntimeException(Messages.getString("misc.3"));
    }
    LockedArray la=new LockedArray(array,addr,longLock);
    objectLockMap.put(array,la);
    return la;
  }
}
