{
  if (!elementType.isEnum()) {
    throw new ClassCastException();
  }
  if (elementType.getEnumConstants().length <= 64) {
    return new MiniEnumSet<E>(elementType);
  }
  return new HugeEnumSet<E>(elementType);
}
