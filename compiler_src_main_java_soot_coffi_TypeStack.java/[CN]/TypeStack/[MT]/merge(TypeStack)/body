{
  if (types.length != other.types.length)   throw new RuntimeException("TypeStack merging failed; unequal " + "stack lengths: " + types.length + " and "+ other.types.length);
  TypeStack newStack=new TypeStack();
  newStack.types=new Type[other.types.length];
  for (int i=0; i < types.length; i++)   if (types[i].equals(other.types[i]))   newStack.types[i]=types[i];
 else {
    if ((!(types[i] instanceof ArrayType) && !(types[i] instanceof RefType)) || (!(other.types[i] instanceof RefType) && !(other.types[i] instanceof ArrayType))) {
      throw new RuntimeException("TypeStack merging failed; incompatible types " + types[i] + " and "+ other.types[i]);
    }
    newStack.types[i]=RefType.v("java.lang.Object");
  }
  return newStack;
}
