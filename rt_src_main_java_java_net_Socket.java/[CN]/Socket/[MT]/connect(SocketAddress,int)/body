{
  checkClosedAndCreate(true);
  if (timeout < 0) {
    throw new IllegalArgumentException(Messages.getString("luni.5B"));
  }
  if (isConnected()) {
    throw new SocketException(Messages.getString("luni.5F"));
  }
  if (remoteAddr == null) {
    throw new IllegalArgumentException(Messages.getString("luni.5D"));
  }
  if (!(remoteAddr instanceof InetSocketAddress)) {
    throw new IllegalArgumentException(Messages.getString("luni.49",remoteAddr.getClass()));
  }
  InetSocketAddress inetAddr=(InetSocketAddress)remoteAddr;
  InetAddress addr;
  if ((addr=inetAddr.getAddress()) == null) {
    throw new UnknownHostException(Messages.getString("luni.1A",remoteAddr));
  }
  int port=inetAddr.getPort();
  checkDestination(addr,port);
synchronized (connectLock) {
    try {
      if (!isBound()) {
        if (!NetUtil.usingSocks(proxy)) {
          impl.bind(InetAddress.ANY,0);
        }
        isBound=true;
      }
      impl.connect(remoteAddr,timeout);
      isConnected=true;
    }
 catch (    IOException e) {
      impl.close();
      throw e;
    }
  }
}
