{
  if (null == proxy || Proxy.Type.HTTP == proxy.type()) {
    throw new IllegalArgumentException(Messages.getString("luni.73"));
  }
  InetSocketAddress address=(InetSocketAddress)proxy.address();
  if (null != address) {
    InetAddress addr=address.getAddress();
    String host;
    if (null != addr) {
      host=addr.getHostAddress();
    }
 else {
      host=address.getHostName();
    }
    int port=address.getPort();
    checkConnectPermission(host,port);
  }
  impl=factory != null ? factory.createSocketImpl() : new PlainSocketImpl(proxy);
  this.proxy=proxy;
}
