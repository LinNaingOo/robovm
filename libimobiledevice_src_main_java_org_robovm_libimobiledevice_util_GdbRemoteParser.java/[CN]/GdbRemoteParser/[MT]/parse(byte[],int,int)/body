{
  List<byte[]> result=new ArrayList<>();
  for (int i=offset; i < offset + length; i++) {
    if (buffer.length == position) {
      byte[] tmp=new byte[buffer.length * 2];
      System.arraycopy(buffer,0,tmp,0,buffer.length);
      buffer=tmp;
    }
    byte b=bytes[i];
    buffer[position++]=b;
    if (waitingForChecksum && (position - hashPosition) == 2) {
      waitingForChecksum=false;
      byte[] tmp=new byte[position];
      System.arraycopy(buffer,0,tmp,0,position);
      position=0;
      result.add(tmp);
    }
 else     if (b == '#') {
      waitingForChecksum=true;
      hashPosition=position;
    }
  }
  return result;
}
