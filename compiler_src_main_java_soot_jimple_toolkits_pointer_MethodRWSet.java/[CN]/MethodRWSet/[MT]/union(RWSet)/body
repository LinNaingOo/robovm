{
  if (other == null)   return false;
  if (isFull)   return false;
  boolean ret=false;
  if (other instanceof MethodRWSet) {
    MethodRWSet o=(MethodRWSet)other;
    if (o.getCallsNative()) {
      ret=!getCallsNative() | ret;
      setCallsNative();
    }
    if (o.isFull) {
      ret=!isFull | ret;
      isFull=true;
      if (true)       throw new RuntimeException("attempt to add full set " + o + " into "+ this);
      globals=null;
      fields=null;
      return ret;
    }
    if (o.globals != null) {
      if (globals == null)       globals=new HashSet();
      ret=globals.addAll(o.globals) | ret;
      if (globals.size() > MAX_SIZE) {
        globals=null;
        isFull=true;
        throw new RuntimeException("attempt to add full set " + o + " into "+ this);
      }
    }
    if (o.fields != null) {
      for (      Object element : o.fields.keySet()) {
        final Object field=element;
        PointsToSet os=o.getBaseForField(field);
        ret=addFieldRef(os,field) | ret;
      }
    }
  }
 else {
    StmtRWSet oth=(StmtRWSet)other;
    if (oth.base != null) {
      ret=addFieldRef(oth.base,oth.field) | ret;
    }
 else     if (oth.field != null) {
      ret=addGlobal((SootField)oth.field) | ret;
    }
  }
  if (!getCallsNative() && other.getCallsNative()) {
    setCallsNative();
    return true;
  }
  return ret;
}
