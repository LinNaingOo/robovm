{
  int startStr=matchResult.getLeftBound();
  int strLength=matchResult.getRightBound();
  if (stringIndex + 1 > strLength) {
    matchResult.hitEnd=true;
    return -1;
  }
  char ch=testString.charAt(stringIndex);
  if (!surrChars.contains(ch)) {
    return -1;
  }
  if (Character.isHighSurrogate(ch)) {
    if (stringIndex + 1 < strLength) {
      char low=testString.charAt(stringIndex + 1);
      if (Character.isLowSurrogate(low)) {
        return -1;
      }
    }
  }
 else   if (Character.isLowSurrogate(ch)) {
    if (stringIndex > startStr) {
      char high=testString.charAt(stringIndex - 1);
      if (Character.isHighSurrogate(high)) {
        return -1;
      }
    }
  }
  return next.matches(stringIndex + 1,testString,matchResult);
}
