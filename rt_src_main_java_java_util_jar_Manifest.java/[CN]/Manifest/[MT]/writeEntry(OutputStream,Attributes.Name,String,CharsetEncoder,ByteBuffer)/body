{
  byte[] out=name.getBytes();
  if (out.length > LINE_LENGTH_LIMIT) {
    throw new IOException(Messages.getString("archive.33",name,Integer.valueOf(LINE_LENGTH_LIMIT)));
  }
  os.write(out);
  os.write(VALUE_SEPARATOR);
  encoder.reset();
  bBuf.clear().limit(LINE_LENGTH_LIMIT - out.length - 2);
  CharBuffer cBuf=CharBuffer.wrap(value);
  CoderResult r;
  while (true) {
    r=encoder.encode(cBuf,bBuf,true);
    if (CoderResult.UNDERFLOW == r) {
      r=encoder.flush(bBuf);
    }
    os.write(bBuf.array(),bBuf.arrayOffset(),bBuf.position());
    os.write(LINE_SEPARATOR);
    if (CoderResult.UNDERFLOW == r) {
      break;
    }
    os.write(' ');
    bBuf.clear().limit(LINE_LENGTH_LIMIT - 1);
  }
}
