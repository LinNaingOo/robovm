{
  final ServerSocket ss=new ServerSocket(0);
  new Thread(new Runnable(){
    public void run(){
      try {
        System.err.println("accepting...");
        Socket client=ss.accept();
        System.err.println("accepted...");
        Thread.sleep(30 * 1000);
        System.err.println("server exiting...");
      }
 catch (      Exception ex) {
        ex.printStackTrace();
      }
    }
  }
).start();
  Socket s=new Socket();
  s.connect(ss.getLocalSocketAddress());
  new Killer(s).start();
  try {
    System.err.println("write...");
    while (true) {
      byte[] buf=new byte[256 * 1024];
      s.getOutputStream().write(buf);
    }
  }
 catch (  SocketException expected) {
  }
  ss.close();
}
