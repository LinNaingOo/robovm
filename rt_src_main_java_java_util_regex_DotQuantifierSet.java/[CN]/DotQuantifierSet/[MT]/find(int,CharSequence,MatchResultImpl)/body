{
  int strLength=matchResult.getRightBound();
  int res=next.find(stringIndex,testString,matchResult);
  if (res >= 0) {
    int nextSearch=findLineTerminator(res,strLength,testString);
    if (nextSearch < 0) {
      nextSearch=strLength;
    }
    nextSearch=next.findBack(res,nextSearch,testString,matchResult);
    res=(res < nextSearch) ? nextSearch : res;
  }
 else {
    return -1;
  }
  int leftBound=(res > 0) ? findBackLineTerminator(stringIndex,res - 1,testString) : (res == 0) ? 0 : -1;
  res=(leftBound >= stringIndex) ? ((leftBound < res) ? leftBound + 1 : leftBound) : stringIndex;
  return res;
}
