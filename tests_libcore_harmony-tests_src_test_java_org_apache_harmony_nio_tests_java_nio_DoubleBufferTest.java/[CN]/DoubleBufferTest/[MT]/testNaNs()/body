{
  long[] nans=new long[]{0x7ff0000000000000L,0xfff0000000000000L,0x7ff8000000000000L};
  for (int i=0; i < nans.length; i++) {
    long longBitsIn=nans[i];
    double dbl=Double.longBitsToDouble(longBitsIn);
    long longBitsOut=Double.doubleToRawLongBits(dbl);
    assertTrue(longBitsIn == longBitsOut);
    ByteBuffer buffer=ByteBuffer.allocate(8);
    buffer.putDouble(dbl);
    double bufDoubleOut=buffer.getDouble(0);
    long bufLongOut=Double.doubleToRawLongBits(bufDoubleOut);
    assertTrue(longBitsIn == bufLongOut);
  }
}
