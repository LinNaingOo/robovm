{
  buf.clear();
  buf.mark();
  buf.position(buf.limit());
  DoubleBuffer readonly=buf.asReadOnlyBuffer();
  assertNotSame(buf,readonly);
  assertTrue(readonly.isReadOnly());
  assertEquals(buf.position(),readonly.position());
  assertEquals(buf.limit(),readonly.limit());
  assertEquals(buf.isDirect(),readonly.isDirect());
  assertEquals(buf.order(),readonly.order());
  assertContentEquals(buf,readonly);
  readonly.reset();
  assertEquals(readonly.position(),0);
  readonly.clear();
  assertEquals(buf.position(),buf.limit());
  buf.reset();
  assertEquals(buf.position(),0);
}
