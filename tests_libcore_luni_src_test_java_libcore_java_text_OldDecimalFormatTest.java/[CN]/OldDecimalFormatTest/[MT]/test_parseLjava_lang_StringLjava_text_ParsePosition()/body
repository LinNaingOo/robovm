{
  DecimalFormat format=(DecimalFormat)NumberFormat.getNumberInstance(Locale.ENGLISH);
  ParsePosition pos=new ParsePosition(0);
  Number result=format.parse("9223372036854775807",pos);
  assertTrue("Wrong result type for Long.MAX_VALUE",result.getClass() == Long.class);
  assertEquals("Wrong result Long.MAX_VALUE",Long.MAX_VALUE,result.longValue());
  pos=new ParsePosition(0);
  result=format.parse("-9223372036854775808",pos);
  assertTrue("Wrong result type for Long.MIN_VALUE",result.getClass() == Long.class);
  assertTrue("Wrong result Long.MIN_VALUE: " + result.longValue(),result.longValue() == Long.MIN_VALUE);
  pos=new ParsePosition(0);
  result=format.parse("9223372036854775808",pos);
  assertTrue("Wrong result type for Long.MAX_VALUE+1",result.getClass() == Double.class);
  assertEquals("Wrong result Long.MAX_VALUE + 1",(double)Long.MAX_VALUE + 1,result.doubleValue());
  pos=new ParsePosition(0);
  result=format.parse("-9223372036854775809",pos);
  assertTrue("Wrong result type for Long.MIN_VALUE - 1",result.getClass() == Double.class);
  assertEquals("Wrong result Long.MIN_VALUE - 1",(double)Long.MIN_VALUE - 1,result.doubleValue());
  pos=new ParsePosition(0);
  result=format.parse("18446744073709551629",pos);
  assertTrue("Wrong result type for overflow",result.getClass() == Double.class);
  assertEquals("Wrong result for overflow",18446744073709551629d,result.doubleValue());
  pos=new ParsePosition(0);
  result=format.parse("42325917317067571199",pos);
  assertTrue("Wrong result type for overflow a: " + result,result.getClass() == Double.class);
  assertTrue("Wrong result for overflow a: " + result,result.doubleValue() == 42325917317067571199d);
  pos=new ParsePosition(0);
  result=format.parse("4232591731706757119E1",pos);
  assertTrue("Wrong result type for overflow b: " + result,result.getClass() == Double.class);
  assertEquals("Wrong result for overflow b: " + result,42325917317067571190d,result.doubleValue());
  pos=new ParsePosition(0);
  result=format.parse(".42325917317067571199E20",pos);
  assertTrue("Wrong result type for overflow c: " + result,result.getClass() == Double.class);
  assertTrue("Wrong result for overflow c: " + result,result.doubleValue() == 42325917317067571199d);
  pos=new ParsePosition(0);
  result=format.parse("922337203685477580.9E1",pos);
  assertTrue("Wrong result type for overflow d: " + result,result.getClass() == Double.class);
  assertTrue("Wrong result for overflow d: " + result,result.doubleValue() == 9223372036854775809d);
  pos=new ParsePosition(0);
  result=format.parse("9.223372036854775809E18",pos);
  assertTrue("Wrong result type for overflow e: " + result,result.getClass() == Double.class);
  assertTrue("Wrong result for overflow e: " + result,result.doubleValue() == 9223372036854775809d);
  format.setMultiplier(100);
  result=format.parse("9223372036854775807",new ParsePosition(0));
  assertEquals("Wrong result type multiplier 100: " + result,Long.class,result.getClass());
  assertTrue("Wrong result for multiplier 100: " + result,result.longValue() == 92233720368547760L);
  format.setMultiplier(1000);
  result=format.parse("9223372036854775807",new ParsePosition(0));
  assertTrue("Wrong result type multiplier 1000: " + result,result.getClass() == Long.class);
  assertTrue("Wrong result for multiplier 1000: " + result,result.longValue() == 9223372036854776L);
  format.setMultiplier(10000);
  result=format.parse("9223372036854775807",new ParsePosition(0));
  assertTrue("Wrong result type multiplier 10000: " + result,result.getClass() == Double.class);
  assertTrue("Wrong result for multiplier 10000: " + result,result.doubleValue() == 922337203685477.5807d);
}
