{
  InetAddress addr=InetAddress.getLocalHost();
  ServerSocket serverSocket=new ServerSocket(0,5,addr);
  Socket theSocket=new Socket(addr,serverSocket.getLocalPort());
  Socket servSock=serverSocket.accept();
  InputStream theInput=theSocket.getInputStream();
  OutputStream theOutput=servSock.getOutputStream();
  theSocket.shutdownInput();
  String sendString=new String("Test");
  theOutput.write(sendString.getBytes());
  theOutput.flush();
  Thread.sleep(1000);
  assertEquals(0,theInput.available());
  theSocket.close();
  serverSocket.close();
  Socket socket=new Socket();
  socket.close();
  try {
    socket.shutdownInput();
    fail("IOException was not thrown.");
  }
 catch (  IOException ioe) {
  }
}
