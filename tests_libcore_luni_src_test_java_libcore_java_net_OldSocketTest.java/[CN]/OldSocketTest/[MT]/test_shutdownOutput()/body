{
  InetAddress addr=InetAddress.getLocalHost();
  int port=Support_PortManager.getNextPort();
  ServerSocket serverSocket=new ServerSocket(port,5,addr);
  Socket theSocket=new Socket(addr,port);
  Socket servSock=serverSocket.accept();
  InputStream theInput=theSocket.getInputStream();
  OutputStream theOutput=servSock.getOutputStream();
  servSock.shutdownOutput();
  String sendString=new String("Test");
  try {
    theOutput.write(sendString.getBytes());
    theOutput.flush();
    fail("No exception when writing on socket with output shutdown");
  }
 catch (  Exception e) {
  }
  theSocket.close();
  serverSocket.close();
  try {
    theSocket.shutdownInput();
    fail("IOException was not thrown.");
  }
 catch (  IOException ioe) {
  }
}
