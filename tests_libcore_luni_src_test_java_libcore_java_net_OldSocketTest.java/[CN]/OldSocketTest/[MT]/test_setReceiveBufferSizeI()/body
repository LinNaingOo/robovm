{
  try {
    int sport=startServer("SServer setReceiveBufferSizeI");
    int portNumber=Support_PortManager.getNextPort();
    s=new Socket(InetAddress.getLocalHost(),sport,null,portNumber);
    s.setReceiveBufferSize(130);
    assertTrue("Incorrect buffer size",s.getReceiveBufferSize() >= 130);
    ensureExceptionThrownIfOptionIsUnsupportedOnOS(SO_RCVBUF);
  }
 catch (  Exception e) {
    handleException(e,SO_RCVBUF);
  }
  try {
    Socket theSocket=new Socket();
    theSocket.close();
    theSocket.setReceiveBufferSize(1);
    fail("SocketException was not thrown.");
  }
 catch (  SocketException ioe) {
  }
catch (  IOException ioe) {
    fail("IOException was thrown.");
  }
}
