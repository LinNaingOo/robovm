{
  short targetNodeType=dtm.getNodeType(targetNode);
  TemplateSubPatternAssociation head;
switch (targetNodeType) {
case DTM.ELEMENT_NODE:
case DTM.ATTRIBUTE_NODE:
    head=(TemplateSubPatternAssociation)m_patternTable.get(dtm.getLocalName(targetNode));
  break;
case DTM.TEXT_NODE:
case DTM.CDATA_SECTION_NODE:
head=m_textPatterns;
break;
case DTM.ENTITY_REFERENCE_NODE:
case DTM.ENTITY_NODE:
head=(TemplateSubPatternAssociation)m_patternTable.get(dtm.getNodeName(targetNode));
break;
case DTM.PROCESSING_INSTRUCTION_NODE:
head=(TemplateSubPatternAssociation)m_patternTable.get(dtm.getLocalName(targetNode));
break;
case DTM.COMMENT_NODE:
head=m_commentPatterns;
break;
case DTM.DOCUMENT_NODE:
case DTM.DOCUMENT_FRAGMENT_NODE:
head=m_docPatterns;
break;
case DTM.NOTATION_NODE:
default :
head=(TemplateSubPatternAssociation)m_patternTable.get(dtm.getNodeName(targetNode));
}
return (null == head) ? m_wildCardPatterns : head;
}
