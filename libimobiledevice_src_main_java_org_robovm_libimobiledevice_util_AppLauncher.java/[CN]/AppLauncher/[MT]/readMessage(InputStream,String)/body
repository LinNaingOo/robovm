{
  StringBuilder builder=new StringBuilder();
  char c=0;
  while ((c=(char)in.read()) != -1) {
    builder.append(c);
    if (message.equals(builder.toString())) {
      return;
    }
    if (!message.startsWith(builder.toString())) {
      throw new IOException("Expected '" + message + "' got '"+ builder.toString()+ "'");
    }
  }
  throw new IOException("Expected '" + message + "' got '"+ builder.toString()+ "'");
}
