{
  if (config.isSkipLinking()) {
    throw new IllegalStateException("Cannot skip linking if target should be run");
  }
  boolean add=true;
  for (  String arg : launchParameters.getArguments()) {
    if (arg.startsWith("-rvm:log=")) {
      add=false;
      break;
    }
  }
  if (add) {
    List<String> args=new ArrayList<String>(launchParameters.getArguments());
    args.add(0,"-rvm:log=warn");
    launchParameters.setArguments(args);
  }
  Map<String,String> env=new HashMap<>(launchParameters.getEnvironment() != null ? launchParameters.getEnvironment() : Collections.<String,String>emptyMap());
  env.put("ROBOVM_LAUNCH_MODE",config.isDebug() ? "debug" : "release");
  launchParameters.setEnvironment(env);
  return doLaunch(launchParameters);
}
