{
  last=0;
  nodeToColor.put(startNode,Visited);
  nodeStack[last]=startNode;
  indexStack[last++]=-1;
  while (last > 0) {
    int toVisitIndex=++indexStack[last - 1];
    Object toVisitNode=nodeStack[last - 1];
    if (toVisitIndex >= graph.getSuccsOf(toVisitNode).size()) {
      finishingOrder.addFirst(toVisitNode);
      last--;
    }
 else {
      Object childNode=graph.getSuccsOf(toVisitNode).get(toVisitIndex);
      if (nodeToColor.get(childNode) == null) {
        nodeToColor.put(childNode,Visited);
        nodeStack[last]=childNode;
        indexStack[last++]=-1;
      }
    }
  }
}
