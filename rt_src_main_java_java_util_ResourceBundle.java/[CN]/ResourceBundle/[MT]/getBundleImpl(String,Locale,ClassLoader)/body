{
  if (bundleName != null) {
    ResourceBundle bundle;
    if (!locale.equals(Locale.getDefault())) {
      String localeName=locale.toString();
      if (localeName.length() > 0) {
        localeName=UNDER_SCORE + localeName;
      }
      if ((bundle=handleGetBundle(bundleName,localeName,false,loader)) != null) {
        return bundle;
      }
    }
    String localeName=Locale.getDefault().toString();
    if (localeName.length() > 0) {
      localeName=UNDER_SCORE + localeName;
    }
    if ((bundle=handleGetBundle(bundleName,localeName,true,loader)) != null) {
      return bundle;
    }
    throw new MissingResourceException(Messages.getString("luni.3A",bundleName,locale),bundleName + '_' + locale,EMPTY_STRING);
  }
  throw new NullPointerException();
}
