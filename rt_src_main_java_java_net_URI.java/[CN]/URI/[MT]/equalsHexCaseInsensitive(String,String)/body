{
  if (first.indexOf('%') != second.indexOf('%')) {
    return first.equals(second);
  }
  int index=0, previndex=0;
  while ((index=first.indexOf('%',previndex)) != -1 && second.indexOf('%',previndex) == index) {
    boolean match=first.substring(previndex,index).equals(second.substring(previndex,index));
    if (!match) {
      return false;
    }
    match=first.substring(index + 1,index + 3).equalsIgnoreCase(second.substring(index + 1,index + 3));
    if (!match) {
      return false;
    }
    index+=3;
    previndex=index;
  }
  return first.substring(previndex).equals(second.substring(previndex));
}
