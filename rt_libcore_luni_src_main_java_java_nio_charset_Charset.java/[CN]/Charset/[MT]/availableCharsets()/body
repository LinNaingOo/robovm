{
  TreeMap<String,Charset> charsets=new TreeMap<String,Charset>(String.CASE_INSENSITIVE_ORDER);
  for (  String charsetName : NativeConverter.getAvailableCharsetNames()) {
    try {
      Charset charset=NativeConverter.charsetForName(charsetName);
      charsets.put(charset.name(),charset);
    }
 catch (    IllegalCharsetNameException e) {
    }
  }
  for (  CharsetProvider charsetProvider : ServiceLoader.load(CharsetProvider.class)) {
    Iterator<Charset> it=charsetProvider.charsets();
    while (it.hasNext()) {
      Charset cs=it.next();
      if (!charsets.containsKey(cs.name())) {
        charsets.put(cs.name(),cs);
      }
    }
  }
  return Collections.unmodifiableSortedMap(charsets);
}
