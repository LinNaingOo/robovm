{
  List<Object> args=new ArrayList<Object>();
  args.add("-f");
  args.add("-s");
  args.add(identity);
  if (entitlementsPList != null) {
    args.add("--entitlements");
    args.add(entitlementsPList);
  }
  args.add(appDir);
  new Executor(config.getLogger(),"codesign").addEnv("CODESIGN_ALLOCATE",new Executor(config.getLogger(),"xcrun").args("-sdk","iphoneos","-f","codesign_allocate").execCapture()).args(args).exec();
}
