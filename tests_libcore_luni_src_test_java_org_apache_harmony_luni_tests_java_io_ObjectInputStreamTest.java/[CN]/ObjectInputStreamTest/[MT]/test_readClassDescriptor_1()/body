{
  A a=new A();
  a.name="It's a test";
  PipedOutputStream pout=new PipedOutputStream();
  PipedInputStream pin=new PipedInputStream(pout);
  ObjectOutputStream out=new ObjectOutputStream(pout);
  ObjectInputStream in=new ObjectIutputStreamWithReadDesc2(pin,A.class);
  out.writeObject(a);
  A a1=(A)in.readObject();
  assertEquals("Single case: incorrectly read the field of A",a.name,a1.name);
  HashMap m=new HashMap();
  a=new A();
  a.name="It's a test 0";
  a1=new A();
  a1.name="It's a test 1";
  m.put("0",a);
  m.put("1",a1);
  out.writeObject(m);
  HashMap m1=(HashMap)in.readObject();
  assertEquals("Incorrectly read the field of A",a.name,((A)m1.get("0")).name);
  assertEquals("Incorrectly read the field of A1",a1.name,((A)m1.get("1")).name);
}
