{
  if (settings == null) {
    settings=new DocumentBuilderSetting[0];
  }
 else {
    settings=(DocumentBuilderSetting[])settings.clone();
  }
  factory=DocumentBuilderFactory.newInstance();
  if (factory == null) {
    throw new RuntimeException("DocumentBuilderFactory must not be null");
  }
  if (settings != null) {
    for (int i=0; i < settings.length; i++) {
      settings[i].applySetting(factory);
    }
  }
  try {
    builder=factory.newDocumentBuilder();
  }
 catch (  ParserConfigurationException e) {
    e.printStackTrace();
  }
  if (builder == null) {
    throw new RuntimeException("DocumentBuilder must not be null");
  }
}
