{
  if (prog == null) {
    throw new NullPointerException();
  }
  if (prog.length() == 0) {
    throw new IllegalArgumentException();
  }
  if (envp != null) {
    if (envp.length != 0) {
      for (int i=0; i < envp.length; i++) {
        if (envp[i] == null) {
          throw new NullPointerException("An element of envp shouldn't be empty.");
        }
      }
    }
 else {
      envp=null;
    }
  }
  StringTokenizer st=new StringTokenizer(prog);
  String[] cmdarray=new String[st.countTokens()];
  int i=0;
  while (st.hasMoreTokens()) {
    cmdarray[i++]=st.nextToken();
  }
  return exec(cmdarray,envp,directory);
}
