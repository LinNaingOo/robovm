{
  SecurityManager currentSecurity=System.getSecurityManager();
  if (currentSecurity != null) {
    currentSecurity.checkExec(progArray[0]);
  }
  if (progArray == null) {
    throw new NullPointerException("progArray shouldn't be null.");
  }
  if (progArray.length == 0) {
    throw new IndexOutOfBoundsException();
  }
  for (int i=0; i < progArray.length; i++) {
    if (progArray[i] == null) {
      throw new NullPointerException("An element of progArray shouldn't be empty.");
    }
  }
  if (envp != null) {
    if (envp.length != 0) {
      for (int i=0; i < envp.length; i++) {
        if (envp[i] == null) {
          throw new NullPointerException("An element of envp shouldn't be empty.");
        }
      }
    }
 else {
      envp=null;
    }
  }
  if (envp == null) {
    envp=new String[0];
  }
  return SystemProcess.create(progArray,envp,directory);
}
