{
  char high=pattern[nextIndex()];
  if (Character.isHighSurrogate(high)) {
    int lowExpectedIndex=prevNW + 1;
    if (lowExpectedIndex < pattern.length) {
      char low=pattern[lowExpectedIndex];
      if (Character.isLowSurrogate(low)) {
        nextIndex();
        return Character.toCodePoint(high,low);
      }
    }
  }
  return (int)high;
}
