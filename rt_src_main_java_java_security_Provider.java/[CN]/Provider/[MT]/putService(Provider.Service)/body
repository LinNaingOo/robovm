{
  if (s == null) {
    throw new NullPointerException();
  }
  SecurityManager sm=System.getSecurityManager();
  if (sm != null) {
    sm.checkSecurityAccess("putProviderProperty." + name);
  }
  if ("Provider".equals(s.getType())) {
    return;
  }
  servicesChanged();
  if (serviceTable == null) {
    serviceTable=new TwoKeyHashMap<String,String,Service>(128);
  }
  serviceTable.put(s.type,s.algorithm.toUpperCase(),s);
  if (s.aliases != null) {
    if (aliasTable == null) {
      aliasTable=new TwoKeyHashMap<String,String,Service>(256);
    }
    for (Iterator<String> it=s.getAliases(); it.hasNext(); ) {
      aliasTable.put(s.type,(it.next()).toUpperCase(),s);
    }
  }
  serviceInfoToProperties(s);
}
