{
  if (o == null) {
    return 0L;
  }
  NSString s=new NSString(o);
  try {
    long handle=s.getHandle();
    retain(handle);
    if ((flags & MarshalerFlags.CALL_TYPE_CALLBACK) > 0) {
      autorelease(handle);
    }
    return handle;
  }
  finally {
    s.dispose();
  }
}
