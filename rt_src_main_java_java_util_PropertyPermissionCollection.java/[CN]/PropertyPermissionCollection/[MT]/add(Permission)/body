{
  if (!isReadOnly()) {
    Permission prev=permissions.put(perm.getName(),perm);
    if (prev != null && !prev.getActions().equals(perm.getActions())) {
      Permission np=new PropertyPermission(perm.getName(),"read,write");
      permissions.put(perm.getName(),np);
    }
  }
 else {
    throw new IllegalStateException();
  }
}
