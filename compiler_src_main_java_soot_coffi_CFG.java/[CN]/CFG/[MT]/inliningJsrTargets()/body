{
  HashMap<Instruction,Instruction> newblocks=new HashMap<Instruction,Instruction>();
  while (!jsrorder.isEmpty()) {
    Instruction jsr=jsrorder.removeFirst();
    Instruction astore=jsr2astore.get(jsr);
    Instruction ret=astore2ret.get(astore);
    Instruction newhead=makeCopyOf(astore,ret,jsr.next);
    Instruction_Goto togo=new Instruction_Goto();
    togo.target=newhead;
    newhead.labelled=true;
    togo.label=jsr.label;
    togo.labelled=jsr.labelled;
    togo.prev=jsr.prev;
    togo.next=jsr.next;
    togo.prev.next=togo;
    togo.next.prev=togo;
    replacedInsns.put(jsr,togo);
    if (ret != null) {
      newblocks.put(newhead,this.lastInstruction);
    }
  }
  return newblocks;
}
