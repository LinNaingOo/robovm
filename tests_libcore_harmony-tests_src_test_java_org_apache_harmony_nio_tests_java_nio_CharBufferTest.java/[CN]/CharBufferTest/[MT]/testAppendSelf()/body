{
  CharBuffer cb=CharBuffer.allocate(10);
  CharBuffer cb2=cb.duplicate();
  cb.append(cb);
  assertEquals(10,cb.position());
  cb.clear();
  assertEquals(cb2,cb);
  cb.put("abc");
  cb2=cb.duplicate();
  cb.append(cb);
  assertEquals(10,cb.position());
  cb.clear();
  cb2.clear();
  assertEquals(cb2,cb);
  cb.put("edfg");
  cb.clear();
  cb2=cb.duplicate();
  cb.append(cb);
  assertEquals(10,cb.position());
  cb.clear();
  cb2.clear();
  assertEquals(cb,cb2);
}
