{
  long writeCount=0;
  try {
    if (isBlocking()) {
      begin();
    }
synchronized (writeLock) {
      writeCount=networkSystem.writev(fd,sources,offsets,lengths,sources.length);
    }
  }
 catch (  SocketException e) {
    if (e.getCause() instanceof ErrorCodeException) {
      if (ERRCODE_SOCKET_NONBLOCKING_WOULD_BLOCK == ((ErrorCodeException)e.getCause()).getErrorCode()) {
        return writeCount;
      }
    }
    throw e;
  }
 finally {
    if (isBlocking()) {
      end(writeCount >= 0);
    }
  }
  return writeCount;
}
