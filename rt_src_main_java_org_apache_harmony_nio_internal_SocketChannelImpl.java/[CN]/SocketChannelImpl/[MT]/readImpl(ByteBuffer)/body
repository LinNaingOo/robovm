{
synchronized (readLock) {
    int readCount=0;
    try {
      if (isBlocking()) {
        begin();
      }
      int offset=target.position();
      int length=target.remaining();
      if (target.isDirect()) {
        long address=AddressUtil.getDirectBufferAddress(target);
        readCount=networkSystem.readDirect(fd,address + offset,length,(isBlocking() ? TIMEOUT_BLOCK : TIMEOUT_NONBLOCK));
      }
 else {
        byte[] array=target.array();
        offset+=target.arrayOffset();
        readCount=networkSystem.read(fd,array,offset,length,(isBlocking() ? TIMEOUT_BLOCK : TIMEOUT_NONBLOCK));
      }
      return readCount;
    }
  finally {
      if (isBlocking()) {
        end(readCount > 0);
      }
    }
  }
}
