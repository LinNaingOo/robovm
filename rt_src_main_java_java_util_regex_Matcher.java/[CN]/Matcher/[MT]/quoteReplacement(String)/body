{
  if (s.indexOf('\\') < 0 && s.indexOf('$') < 0)   return s;
  StringBuilder res=new StringBuilder(s.length() * 2);
  char ch;
  int len=s.length();
  for (int i=0; i < len; i++) {
switch (ch=s.charAt(i)) {
case '$':
      res.append('\\');
    res.append('$');
  break;
case '\\':
res.append('\\');
res.append('\\');
break;
default :
res.append(ch);
}
}
return res.toString();
}
