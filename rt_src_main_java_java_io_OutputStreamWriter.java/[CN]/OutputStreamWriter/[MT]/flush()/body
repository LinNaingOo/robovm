{
synchronized (lock) {
    checkStatus();
    int position;
    if ((position=bytes.position()) > 0) {
      bytes.flip();
      out.write(bytes.array(),0,position);
      bytes.clear();
    }
    out.flush();
  }
}
