{
  SubContextList subContextList=xctxt.getCurrentNodeList();
  int currentNode=DTM.NULL;
  if (null != subContextList) {
    if (subContextList instanceof PredicatedNodeTest) {
      LocPathIterator iter=((PredicatedNodeTest)subContextList).getLocPathIterator();
      currentNode=iter.getCurrentContextNode();
    }
 else     if (subContextList instanceof StepPattern) {
      throw new RuntimeException(XSLMessages.createMessage(XSLTErrorResources.ER_PROCESSOR_ERROR,null));
    }
  }
 else {
    currentNode=xctxt.getContextNode();
  }
  return new XNodeSet(currentNode,xctxt.getDTMManager());
}
