{
  if (!ignoreCase) {
    return regionMatches(thisStart,string,start,length);
  }
  if (string != null) {
    if (thisStart < 0 || length > count - thisStart) {
      return false;
    }
    if (start < 0 || length > string.count - start) {
      return false;
    }
    thisStart+=offset;
    start+=string.offset;
    int end=thisStart + length;
    char c1, c2;
    char[] target=string.value;
    while (thisStart < end) {
      if ((c1=value[thisStart++]) != (c2=target[start++]) && toUpperCase(c1) != toUpperCase(c2) && toLowerCase(c1) != toLowerCase(c2)) {
        return false;
      }
    }
    return true;
  }
  throw new NullPointerException();
}
