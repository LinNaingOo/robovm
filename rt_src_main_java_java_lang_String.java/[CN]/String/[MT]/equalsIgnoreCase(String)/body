{
  if (string == this) {
    return true;
  }
  if (string == null || count != string.count) {
    return false;
  }
  int o1=offset, o2=string.offset;
  int end=offset + count;
  char c1, c2;
  char[] target=string.value;
  while (o1 < end) {
    if ((c1=value[o1++]) != (c2=target[o2++]) && toUpperCase(c1) != toUpperCase(c2) && toLowerCase(c1) != toLowerCase(c2)) {
      return false;
    }
  }
  return true;
}
