{
  if (st > end)   throw new IllegalArgumentException();
  if (!ci && (end < Character.MIN_SURROGATE || st > Character.MAX_SURROGATE)) {
    if (!inverted) {
      bits.set(st,end + 1);
    }
 else {
      bits.clear(st,end + 1);
    }
  }
 else {
    for (int i=st; i < end + 1; i++) {
      add(i);
    }
  }
  return this;
}
