{
  byte[] key=new byte[]{1,2,3,4,5};
  String algorithm="Algorithm";
  SecretKeySpec ks=new SecretKeySpec(key,algorithm);
  byte[] result=ks.getEncoded();
  if (!Arrays.equals(key,result)) {
    fail("The returned key does not equal to the specified " + "in the constructor.");
  }
  result[0]++;
  assertFalse("The change of returned by getEncoded() method key " + "should not cause the change of internal array.",result[0] == ks.getEncoded()[0]);
  int offset=1;
  int len=4;
  SecretKeySpec sks=new SecretKeySpec(key,offset,len,algorithm);
  assertEquals("Key length is incorrect",len,sks.getEncoded().length);
}
