{
  DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
  Document d=factory.newDocumentBuilder().newDocument();
  d.appendChild(d.createElement("root"));
  d.getFirstChild().insertBefore(d.createElement("foo"),null);
  assertEquals("foo",d.getFirstChild().getFirstChild().getNodeName());
  assertEquals("foo",d.getFirstChild().getLastChild().getNodeName());
  d.getFirstChild().insertBefore(d.createElement("bar"),null);
  assertEquals("foo",d.getFirstChild().getFirstChild().getNodeName());
  assertEquals("bar",d.getFirstChild().getLastChild().getNodeName());
}
