{
  if (!input.markSupported())   throw new UnsupportedOperationException("InputStream doesn't support mark.");
  try {
    input.mark(Integer.MAX_VALUE);
    return new BinaryParser(input).parse();
  }
 catch (  PropertyListException e) {
    input.reset();
    input.mark(Integer.MAX_VALUE);
    return new DOMXMLParser(input).parse();
  }
}
