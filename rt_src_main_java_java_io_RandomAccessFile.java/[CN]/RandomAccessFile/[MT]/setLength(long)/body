{
  openCheck();
  if (newLength < 0) {
    throw new IllegalArgumentException();
  }
synchronized (repositionLock) {
    long position=fileSystem.seek(fd.descriptor,0,IFileSystem.SEEK_CUR);
    fileSystem.truncate(fd.descriptor,newLength);
    seek(position > newLength ? newLength : position);
  }
  if (syncMetadata) {
    fd.sync();
  }
}
