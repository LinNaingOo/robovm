{
  if (count > buffer.length - offset || count < 0 || offset < 0) {
    throw new IndexOutOfBoundsException();
  }
  if (count == 0) {
    return;
  }
synchronized (repositionLock) {
    fileSystem.write(fd.descriptor,buffer,offset,count);
  }
  if (syncMetadata) {
    fd.sync();
  }
}
