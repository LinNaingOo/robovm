{
  String className=clazz.getInternalName();
  File outFile=new File(config.getObjectCacheDir(path),className.replace('/',File.separatorChar) + ".class.o");
  File llFile=new File(config.getLlvmCacheDir(path),className.replace('/',File.separatorChar) + ".class.ll");
  if (!config.isClean() && outFile.exists() && outFile.lastModified() >= clazz.lastModified()) {
    config.getLogger().debug("Skipping unchanged class file: " + clazz.getFileName());
    return outFile;
  }
  llFile.getParentFile().mkdirs();
  outFile.getParentFile().mkdirs();
  config.getLogger().debug("Compiling class file '%s' to object file '%s'",clazz.getFileName(),outFile);
  classToIr(clazz,llFile);
  File bcFile=changeExt(llFile,"bc");
  opt(llFile,bcFile,"-mem2reg","-always-inline");
  File sFile=changeExt(outFile,"s");
  llc(bcFile,sFile);
  gcc(sFile,outFile);
  return outFile;
}
