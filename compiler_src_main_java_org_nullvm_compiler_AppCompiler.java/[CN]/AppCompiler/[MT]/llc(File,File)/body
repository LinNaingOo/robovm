{
  String llcPath="llc";
  if (config.getLlvmBinDir() != null) {
    llcPath=new File(config.getLlvmBinDir(),"llc").getAbsolutePath();
  }
  ArrayList<String> opts=new ArrayList<String>();
  opts.add("-march=" + config.getArch().getLlvmName());
  if (config.getCpu() != null) {
    opts.add("-mcpu=" + config.getCpu());
  }
  outFile.getParentFile().mkdirs();
  exec(llcPath,opts,"-o=" + outFile.toString(),inFile);
}
