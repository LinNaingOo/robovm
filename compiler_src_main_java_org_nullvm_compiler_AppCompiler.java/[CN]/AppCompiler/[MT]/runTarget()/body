{
  Map<String,String> env=new HashMap<String,String>();
  env.putAll(EnvironmentUtils.getProcEnvironment());
  String ldLibraryPathVar="LD_LIBRARY_PATH";
  if (config.getOs() == OS.darwin) {
    ldLibraryPathVar="DY" + ldLibraryPathVar;
  }
  String ldLibraryPath=env.get(ldLibraryPathVar);
  ldLibraryPath=ldLibraryPath == null ? "" : ":" + ldLibraryPath;
  env.put(ldLibraryPathVar,config.getOsArchDepLibDir().getAbsolutePath() + ldLibraryPath);
  try {
    CompilerUtil.execWithEnv(config,config.getTargetDir(),env,new File(config.getTargetDir(),config.getTarget()).getAbsolutePath());
  }
 catch (  ExecuteException e) {
    System.exit(e.getExitValue());
  }
}
