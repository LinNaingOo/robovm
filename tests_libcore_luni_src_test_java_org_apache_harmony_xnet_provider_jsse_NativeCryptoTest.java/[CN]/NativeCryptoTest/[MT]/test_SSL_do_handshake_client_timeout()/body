{
  final ServerSocket listener=new ServerSocket(0);
  try {
    Hooks cHooks=new Hooks();
    Hooks sHooks=new ServerHooks(getServerPrivateKey(),getServerCertificates());
    Future<TestSSLHandshakeCallbacks> client=handshake(listener,1,true,cHooks,null);
    Future<TestSSLHandshakeCallbacks> server=handshake(listener,-1,false,sHooks,null);
    client.get(TIMEOUT_SECONDS,TimeUnit.SECONDS);
    fail();
  }
 catch (  ExecutionException expected) {
    assertEquals(SocketTimeoutException.class,expected.getCause().getClass());
  }
}
