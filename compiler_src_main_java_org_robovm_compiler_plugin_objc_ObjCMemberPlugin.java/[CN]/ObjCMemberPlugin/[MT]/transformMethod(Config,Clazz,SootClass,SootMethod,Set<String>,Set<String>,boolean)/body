{
  AnnotationTag methodAnno=getAnnotation(method,METHOD);
  if (methodAnno != null) {
    if (extensions && !(method.isStatic() && method.isNative())) {
      throw new CompilerException("Objective-C @Method method " + method + " in extension class must be static and native.");
    }
    String selectorName=readStringElem(methodAnno,"selector","").trim();
    if (selectorName.length() == 0) {
      StringBuilder sb=new StringBuilder(method.getName());
      int argCount=method.getParameterCount();
      for (int i=extensions ? 1 : 0; i < argCount; i++) {
        sb.append(':');
      }
      selectorName=sb.toString();
    }
    if (!extensions && (method.getModifiers() & Modifier.FINAL) == 0) {
      Type receiverType=ObjCProtocolProxyPlugin.isObjCProxy(sootClass) ? sootClass.getInterfaces().getFirst().getType() : sootClass.getType();
      createCallback(sootClass,method,selectorName,receiverType);
    }
    if (method.isNative()) {
      if (checkOverridable(overridables,selectorName,method)) {
        overridables.add(selectorName);
      }
      selectors.add(selectorName);
      createBridge(sootClass,method,selectorName,false,extensions);
    }
  }
 else {
    AnnotationTag propertyAnno=getAnnotation(method,PROPERTY);
    if (propertyAnno != null) {
      String methodName=method.getName();
      if (!(methodName.startsWith("get") && methodName.length() > 3) && !(methodName.startsWith("is") && methodName.length() > 2) && !(methodName.startsWith("set") && methodName.length() > 3)) {
        throw new CompilerException("Invalid Objective-C @Property method name " + method);
      }
      if (extensions && !(method.isStatic() && method.isNative())) {
        throw new CompilerException("Objective-C @Property method " + method + " in extension class must be static and native.");
      }
      boolean isGetter=!methodName.startsWith("set");
      if (!extensions) {
        if (isGetter && method.getParameterCount() != 0) {
          throw new CompilerException("Objective-C @Property getter method " + method + " must take 0 arguments");
        }
        if (!isGetter && method.getParameterCount() != 1) {
          throw new CompilerException("Objective-C @Property setter method " + method + " must take 1 argument");
        }
      }
 else {
        if (isGetter && method.getParameterCount() != 1) {
          throw new CompilerException("Objective-C @Property getter method " + method + " in extension class must take 1 argument (this)");
        }
        if (!isGetter && method.getParameterCount() != 2) {
          throw new CompilerException("Objective-C @Property setter method " + method + " in extension class must take 2 arguments");
        }
      }
      if (isGetter && method.getReturnType() == VoidType.v()) {
        throw new CompilerException("Objective-C @Property getter method " + method + " must not return void");
      }
      if (!isGetter && method.getReturnType() != VoidType.v()) {
        throw new CompilerException("Objective-C @Property setter method " + method + " must return void");
      }
      String selectorName=readStringElem(propertyAnno,"selector","").trim();
      if (selectorName.length() == 0) {
        selectorName=methodName;
        if (isGetter) {
          selectorName=methodName.startsWith("is") ? methodName.substring(2) : methodName.substring(3);
          selectorName=selectorName.substring(0,1).toLowerCase() + selectorName.substring(1);
        }
 else {
          selectorName+=":";
        }
      }
      if (!extensions && (method.getModifiers() & Modifier.FINAL) == 0) {
        Type receiverType=ObjCProtocolProxyPlugin.isObjCProxy(sootClass) ? sootClass.getInterfaces().getFirst().getType() : sootClass.getType();
        createCallback(sootClass,method,selectorName,receiverType);
      }
      if (method.isNative()) {
        if (checkOverridable(overridables,selectorName,method)) {
          overridables.add(selectorName);
        }
        selectors.add(selectorName);
        boolean strongRefSetter=!isGetter && readBooleanElem(propertyAnno,"strongRef",false);
        createBridge(sootClass,method,selectorName,strongRefSetter,extensions);
      }
    }
  }
}
