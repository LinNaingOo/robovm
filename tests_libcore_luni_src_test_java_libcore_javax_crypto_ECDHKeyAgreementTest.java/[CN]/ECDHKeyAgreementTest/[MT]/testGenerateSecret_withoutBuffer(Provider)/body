{
  KeyAgreement keyAgreement=getKeyAgreement(provider);
  keyAgreement.init(KAT_PRIVATE_KEY2);
  keyAgreement.doPhase(KAT_PUBLIC_KEY1,true);
  byte[] secret=keyAgreement.generateSecret();
  assertTrue(Arrays.equals(KAT_SECRET,secret));
}
