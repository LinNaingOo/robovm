{
  KeyAgreement keyAgreement=getKeyAgreement(provider);
  keyAgreement.init(KAT_PRIVATE_KEY2);
  keyAgreement.doPhase(KAT_PUBLIC_KEY1,true);
  SecretKey key=keyAgreement.generateSecret("AES");
  assertEquals("AES",key.getAlgorithm());
  assertTrue(Arrays.equals(KAT_SECRET,key.getEncoded()));
}
