{
  m_fixUpWasCalled=true;
  int sz=vars.size();
  for (int i=vars.size() - 1; i >= 0; i--) {
    QName qn=(QName)vars.elementAt(i);
    if (qn.equals(m_qname)) {
      if (i < globalsSize) {
        m_isGlobal=true;
        m_index=i;
      }
 else {
        m_index=i - globalsSize;
      }
      return;
    }
  }
  java.lang.String msg=XSLMessages.createXPATHMessage(XPATHErrorResources.ER_COULD_NOT_FIND_VAR,new Object[]{m_qname.toString()});
  TransformerException te=new TransformerException(msg,this);
  throw new org.apache.xml.utils.WrappedRuntimeException(te);
}
