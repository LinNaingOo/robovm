{
  if (addr instanceof Inet4Address && mask instanceof Inet4Address) {
    if (cacheBroadcast.ipaddress == null) {
      byte[] broadcast=new byte[4];
      if (prefixLength > 0) {
        byte[] maskBytes=mask.getAddress();
        byte[] addrBytes=addr.getAddress();
        for (int i=0; i < broadcast.length; i++) {
          broadcast[i]=(byte)(addrBytes[i] | ~maskBytes[i]);
        }
      }
      cacheBroadcast=new InetAddress(broadcast);
    }
    return cacheBroadcast;
  }
  return null;
}
