{
  SecurityManager sm=System.getSecurityManager();
  if (sm != null && !checkingPackageAccess) {
    int index=className.lastIndexOf('.');
    if (index > 0) {
      try {
        checkingPackageAccess=true;
        sm.checkPackageAccess(className.substring(0,index));
      }
  finally {
        checkingPackageAccess=false;
      }
    }
  }
  return super.loadClass(className,resolveClass);
}
