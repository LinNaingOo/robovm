{
  OutputStream out=null;
  File outFile=null;
  try {
    byte[] classData=IOUtils.toByteArray(in);
    ClassReader cr=new ClassReader(new ByteArrayInputStream(classData));
    String className=cr.getClassName();
    File classDir=new File(new File(classCache,className.replace('/',File.separatorChar)),hash(new ByteArrayInputStream(classData)));
    outFile=new File(classDir,className.replace('/','_') + "" + ".class.ll");
    outFile.getParentFile().mkdirs();
    if (!clean && outFile.exists()) {
      if (verbose) {
        stdout.println("Skipping unchanged class file: " + classFile);
      }
      return processIrFile(outFile);
    }
    if (verbose) {
      stdout.format("Compiling class file '%s' to LLVM IR file '%s'\n",classFile,outFile);
    }
    out=new FileOutputStream(outFile);
    new ClassCompiler().compile(cr,out,false);
  }
 catch (  Throwable t) {
    FileUtils.deleteQuietly(outFile);
    if (t instanceof IOException) {
      throw (IOException)t;
    }
    if (t instanceof RuntimeException) {
      throw (RuntimeException)t;
    }
    throw new RuntimeException(t);
  }
 finally {
    IOUtils.closeQuietly(out);
  }
  return processIrFile(outFile);
}
