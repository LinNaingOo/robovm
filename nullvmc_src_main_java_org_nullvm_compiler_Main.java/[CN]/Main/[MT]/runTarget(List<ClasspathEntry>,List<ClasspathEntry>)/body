{
  Properties bootEntriesProps=new Properties();
  for (  ClasspathEntry entry : bootEntries) {
    bootEntriesProps.setProperty(entry.getArchive().getCanonicalPath(),entry.getDynamicLibrary().getCanonicalPath());
  }
  Properties mainEntriesProps=new Properties();
  for (  ClasspathEntry entry : mainEntries) {
    mainEntriesProps.setProperty(entry.getArchive().getCanonicalPath(),entry.getDynamicLibrary().getCanonicalPath());
  }
  writeClasspathEntries(bootEntries,new File(output,"bootclasspath"));
  writeClasspathEntries(mainEntries,new File(output,"classpath"));
  Map<String,String> env=new HashMap<String,String>();
  env.putAll(EnvironmentUtils.getProcEnvironment());
  String ldLibraryPath=env.get("LD_LIBRARY_PATH");
  ldLibraryPath=ldLibraryPath == null ? "" : ":" + ldLibraryPath;
  env.put("LD_LIBRARY_PATH",new File(home,"lib").getAbsolutePath() + ldLibraryPath);
  try {
    execWithEnv(output,env,new File(output,target).getAbsolutePath());
  }
 catch (  ExecuteException e) {
    System.exit(e.getExitValue());
  }
}
