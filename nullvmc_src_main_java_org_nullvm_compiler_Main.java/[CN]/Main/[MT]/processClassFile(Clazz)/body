{
  OutputStream out=null;
  File outFile=null;
  try {
    byte[] classData=clazz.getBytes();
    String className=clazz.getInternalName();
    File classDir=new File(new File(classCache,className.replace('/',File.separatorChar)),hash(new ByteArrayInputStream(classData)));
    outFile=new File(classDir,getSimpleClassName(className) + "" + ".class.ll");
    outFile.getParentFile().mkdirs();
    if (!clean && outFile.exists()) {
      if (verbose) {
        stdout.println("Skipping unchanged class file: " + clazz.getFileName());
      }
      return processIrFile(outFile);
    }
    if (verbose) {
      stdout.format("Compiling class file '%s' to LLVM IR file '%s'\n",clazz.getFileName(),outFile);
    }
    out=new FileOutputStream(outFile);
    new ClassCompiler().setVerifyWhen(verify).compile(clazz,out);
  }
 catch (  Throwable t) {
    FileUtils.deleteQuietly(outFile);
    if (t instanceof IOException) {
      throw (IOException)t;
    }
    if (t instanceof RuntimeException) {
      throw (RuntimeException)t;
    }
    throw new RuntimeException(t);
  }
 finally {
    IOUtils.closeQuietly(out);
  }
  return processIrFile(outFile);
}
