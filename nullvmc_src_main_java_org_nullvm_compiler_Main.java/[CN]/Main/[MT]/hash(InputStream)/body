{
  try {
    MessageDigest digest=MessageDigest.getInstance("SHA1");
    byte[] buffer=new byte[4096];
    int n=0;
    while (-1 != (n=in.read(buffer))) {
      digest.update(buffer,0,n);
    }
    return toHexString(digest.digest());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException(e);
  }
}
