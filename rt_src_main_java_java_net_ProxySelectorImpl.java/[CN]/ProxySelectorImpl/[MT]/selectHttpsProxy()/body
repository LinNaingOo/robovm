{
  String host;
  String port=null;
  Proxy.Type type=Proxy.Type.DIRECT;
  host=getSystemProperty("https.proxyHost");
  if (null != host) {
    type=Proxy.Type.HTTP;
    port=getSystemProperty("https.proxyPort",String.valueOf(HTTPS_PROXY_PORT));
  }
 else {
    host=getSystemProperty("socksProxyHost");
    if (null != host) {
      type=Proxy.Type.SOCKS;
      port=getSystemProperty("socksProxyPort",String.valueOf(SOCKS_PROXY_PORT));
    }
  }
  int defaultPort=(type == Proxy.Type.SOCKS) ? SOCKS_PROXY_PORT : HTTPS_PROXY_PORT;
  return createProxy(type,host,port,defaultPort);
}
