{
  Proxy proxy;
  if (type == Proxy.Type.DIRECT) {
    proxy=Proxy.NO_PROXY;
  }
 else {
    int iPort;
    try {
      iPort=Integer.valueOf(port).intValue();
    }
 catch (    NumberFormatException e) {
      iPort=defaultPort;
    }
    proxy=new Proxy(type,InetSocketAddress.createUnresolved(host,iPort));
  }
  return proxy;
}
