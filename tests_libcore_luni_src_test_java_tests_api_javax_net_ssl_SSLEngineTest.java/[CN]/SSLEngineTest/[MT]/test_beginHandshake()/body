{
  SSLEngine sse=getEngine();
  try {
    sse.beginHandshake();
    fail("IllegalStateException wasn't thrown");
  }
 catch (  IllegalStateException se) {
  }
catch (  Exception e) {
    fail(e + " was thrown instead of IllegalStateException");
  }
  sse=getEngine("new host",1080);
  try {
    sse.beginHandshake();
    fail("IllegalStateException wasn't thrown");
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail(e + " was thrown instead of IllegalStateException");
  }
  sse=getEngine();
  try {
    sse.setUseClientMode(true);
    sse.beginHandshake();
  }
 catch (  Exception ex) {
    fail("Unexpected exception " + ex);
  }
}
