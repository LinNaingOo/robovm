{
  Chain units=body.getUnits();
  labels=new HashMap(units.size() * 2 + 1,0.7f);
  references=new HashMap<Unit,String>(units.size() * 2 + 1,0.7f);
{
    Iterator boxIt=body.getAllUnitBoxes().iterator();
    Set<Unit> labelStmts=new HashSet<Unit>();
    Set<Unit> refStmts=new HashSet<Unit>();
{
      while (boxIt.hasNext()) {
        UnitBox box=(UnitBox)boxIt.next();
        Unit stmt=box.getUnit();
        if (box.isBranchTarget())         labelStmts.add(stmt);
 else         refStmts.add(stmt);
      }
    }
{
      int labelCount=0;
      int refCount=0;
      Iterator stmtIt=units.iterator();
      while (stmtIt.hasNext()) {
        Unit s=(Unit)stmtIt.next();
        if (labelStmts.contains(s))         labels.put(s,"label" + (labelCount++));
        if (refStmts.contains(s))         references.put(s,Integer.toString(refCount++));
      }
    }
  }
}
