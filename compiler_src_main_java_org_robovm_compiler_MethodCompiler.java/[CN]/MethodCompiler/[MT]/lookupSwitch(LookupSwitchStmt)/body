{
  Map<IntegerConstant,BasicBlockRef> targets=new HashMap<IntegerConstant,BasicBlockRef>();
  for (int i=0; i < stmt.getTargetCount(); i++) {
    int value=stmt.getLookupValue(i);
    Unit target=stmt.getTarget(i);
    targets.put(new IntegerConstant(value),function.newBasicBlockRef(new Label(target)));
  }
  BasicBlockRef def=function.newBasicBlockRef(new Label(stmt.getDefaultTarget()));
  Value key=immediate(stmt,(Immediate)stmt.getKey());
  function.add(new Switch(key,def,targets)).attach(stmt);
}
