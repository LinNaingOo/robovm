{
  if (null == buffer) {
    throw new NullPointerException();
  }
  if (position < 0) {
    throw new IllegalArgumentException();
  }
  openCheck();
  if (!buffer.hasRemaining()) {
    return 0;
  }
  int bytesWritten=0;
synchronized (repositioningLock) {
    long preWritePosition=position();
    position(position);
    try {
      bytesWritten=writeImpl(buffer);
    }
  finally {
      position(preWritePosition);
    }
  }
  return bytesWritten;
}
