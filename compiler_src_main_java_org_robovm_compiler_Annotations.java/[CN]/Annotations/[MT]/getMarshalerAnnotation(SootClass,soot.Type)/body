{
  AnnotationTag tag=null;
  if (clazz.isInterface()) {
    return getMarshalerAnnotationOnInterface(clazz,type);
  }
 else {
    tag=getMarshalerAnnotationOnClass(clazz,type);
    if (tag == null) {
      SootClass sc=clazz;
      while (sc.hasSuperclass()) {
        tag=getMarshalerAnnotationOnInterface(sc,type);
        if (tag != null) {
          break;
        }
        sc=sc.getSuperclass();
      }
    }
  }
  if (tag != null) {
    return tag;
  }
  if (type instanceof ArrayType) {
    ArrayType arrayType=(ArrayType)type;
    if (arrayType.baseType instanceof RefType && ((RefType)arrayType.baseType).getSootClass().hasSuperclass()) {
      Type newType=((RefType)arrayType.baseType).getSootClass().getSuperclass().getType();
      for (int i=0; i < arrayType.numDimensions; i++) {
        newType=newType.makeArrayType();
      }
      return getMarshalerAnnotation(clazz,newType);
    }
  }
 else   if (type instanceof RefType) {
    SootClass sc=((RefType)type).getSootClass();
    if (sc.hasSuperclass()) {
      return getMarshalerAnnotation(clazz,sc.getSuperclass().getType());
    }
  }
  return null;
}
