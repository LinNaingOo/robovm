{
  while (!clazz.isPhantom() && clazz.hasSuperclass()) {
    List<AnnotationTag> tags=new ArrayList<AnnotationTag>();
    AnnotationTag marshaler=getAnnotation(clazz,MARSHALER);
    if (marshaler != null) {
      tags.add(marshaler);
    }
 else {
      AnnotationTag marshalers=getAnnotation(clazz,MARSHALERS);
      if (marshalers != null) {
        for (        AnnotationElem e : ((AnnotationArrayElem)marshalers.getElemAt(0)).getValues()) {
          AnnotationAnnotationElem elem=(AnnotationAnnotationElem)e;
          tags.add(elem.getValue());
        }
      }
    }
    for (    AnnotationTag tag : tags) {
      AnnotationClassElem elem=(AnnotationClassElem)getElemByName(tag,"type");
      if (elem == null && type == null) {
        return tag;
      }
      if (elem != null && type != null) {
        String desc=elem.getDesc();
        if (getInternalName(type).equals(getInternalNameFromDescriptor(desc))) {
          return tag;
        }
      }
    }
    for (    SootClass interfaze : clazz.getInterfaces()) {
      AnnotationTag tag=getMarshalerAnnotation(interfaze,type);
      if (tag != null) {
        return tag;
      }
    }
    clazz=clazz.getSuperclass();
  }
  return null;
}
