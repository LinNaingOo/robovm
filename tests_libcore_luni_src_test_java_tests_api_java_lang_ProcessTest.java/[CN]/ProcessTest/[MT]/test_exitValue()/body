{
  String[] commands={"ls"};
  Process process=Runtime.getRuntime().exec(commands,null,null);
  process.waitFor();
  assertEquals(0,process.exitValue());
  String[] commandsSleep={"sleep","3000"};
  process=Runtime.getRuntime().exec(commandsSleep,null,null);
  process.destroy();
  process.waitFor();
  assertTrue(process.exitValue() != 0);
  process=Runtime.getRuntime().exec(new String[]{"sleep","3000"},null,null);
  try {
    process.exitValue();
    fail();
  }
 catch (  IllegalThreadStateException expected) {
  }
}
