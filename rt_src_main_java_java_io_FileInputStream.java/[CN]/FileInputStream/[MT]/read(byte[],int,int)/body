{
  if (count > buffer.length - offset || count < 0 || offset < 0) {
    throw new IndexOutOfBoundsException();
  }
  if (0 == count) {
    return 0;
  }
  openCheck();
synchronized (repositioningLock) {
    if (fd == FileDescriptor.in) {
      return (int)fileSystem.ttyRead(buffer,offset,count);
    }
    return (int)fileSystem.read(fd.descriptor,buffer,offset,count);
  }
}
