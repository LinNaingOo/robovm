{
  if (that instanceof UnresolvedPrincipal) {
    UnresolvedPrincipal up=(UnresolvedPrincipal)that;
    return klass.equals(up.klass) && (name == null ? up.name == null : name.equals(up.name));
  }
  if (that instanceof Principal) {
    return implies((Principal)that);
  }
  return false;
}
