{
  server.enqueue(new MockResponse().addHeader("Expires: " + formatDate(1,TimeUnit.HOURS)).addHeader("X-Response-ID: 1"));
  server.enqueue(new MockResponse().addHeader("X-Response-ID: 2"));
  server.play();
  URL url=server.getUrl("/");
  HttpURLConnection request1=(HttpURLConnection)url.openConnection();
  request1.setRequestMethod(requestMethod);
  addRequestBodyIfNecessary(requestMethod,request1);
  assertEquals("1",request1.getHeaderField("X-Response-ID"));
  URLConnection request2=url.openConnection();
  if (expectCached) {
    assertEquals("1",request1.getHeaderField("X-Response-ID"));
  }
 else {
    assertEquals("2",request2.getHeaderField("X-Response-ID"));
  }
}
