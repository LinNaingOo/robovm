{
  server.shutdown();
  server=new MockWebServer();
  server.enqueue(new MockResponse().addHeader("Cache-Control: max-age=60").setBody("A"));
  server.enqueue(new MockResponse().setBody("B"));
  server.play();
  URL url=server.getUrl("/" + UUID.randomUUID());
  assertEquals("A",readAscii(url.openConnection()));
  URLConnection connection=url.openConnection();
  InputStream in=connection.getInputStream();
  try {
    int bodyChar=in.read();
    assertTrue(bodyChar == 'A' || bodyChar == 'B');
    assertEquals(-1,in.read());
  }
 catch (  IOException e) {
    if (!permitReadBodyFailures) {
      throw e;
    }
  }
}
