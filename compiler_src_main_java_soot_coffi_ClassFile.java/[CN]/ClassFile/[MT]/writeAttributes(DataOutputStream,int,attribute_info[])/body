{
  attribute_info a=null;
  int i, len;
  short j;
  String s;
  for (i=0; i < attributes_count; i++) {
    a=ai[i];
    dd.writeShort(a.attribute_name);
    dd.writeInt((int)a.attribute_length);
    if (a instanceof SourceFile_attribute) {
      SourceFile_attribute sa=(SourceFile_attribute)a;
      dd.writeShort(sa.sourcefile_index);
    }
 else     if (a instanceof ConstantValue_attribute) {
      ConstantValue_attribute ca=(ConstantValue_attribute)a;
      dd.writeShort(ca.constantvalue_index);
    }
 else     if (a instanceof Code_attribute) {
      Code_attribute ca=(Code_attribute)a;
      dd.writeShort(ca.max_stack);
      dd.writeShort(ca.max_locals);
      dd.writeInt((int)ca.code_length);
      dd.write(ca.code,0,(int)ca.code_length);
      dd.writeShort(ca.exception_table_length);
      int k;
      exception_table_entry e;
      for (k=0; k < ca.exception_table_length; k++) {
        e=ca.exception_table[k];
        dd.writeShort(e.start_pc);
        dd.writeShort(e.end_pc);
        dd.writeShort(e.handler_pc);
        dd.writeShort(e.catch_type);
      }
      dd.writeShort(ca.attributes_count);
      if (ca.attributes_count > 0)       writeAttributes(dd,ca.attributes_count,ca.attributes);
    }
 else     if (a instanceof Exception_attribute) {
      Exception_attribute ea=(Exception_attribute)a;
      dd.writeShort(ea.number_of_exceptions);
      if (ea.number_of_exceptions > 0) {
        int k;
        for (k=0; k < ea.number_of_exceptions; k++)         dd.writeShort(ea.exception_index_table[k]);
      }
    }
 else     if (a instanceof LineNumberTable_attribute) {
      LineNumberTable_attribute la=(LineNumberTable_attribute)a;
      dd.writeShort(la.line_number_table_length);
      int k;
      line_number_table_entry e;
      for (k=0; k < la.line_number_table_length; k++) {
        e=la.line_number_table[k];
        dd.writeShort(e.start_pc);
        dd.writeShort(e.line_number);
      }
    }
 else     if (a instanceof LocalVariableTable_attribute) {
      LocalVariableTable_attribute la=(LocalVariableTable_attribute)a;
      dd.writeShort(la.local_variable_table_length);
      int k;
      local_variable_table_entry e;
      for (k=0; k < la.local_variable_table_length; k++) {
        e=la.local_variable_table[k];
        dd.writeShort(e.start_pc);
        dd.writeShort(e.length);
        dd.writeShort(e.name_index);
        dd.writeShort(e.descriptor_index);
        dd.writeShort(e.index);
      }
    }
 else {
      G.v().out.println("Generic/Unknown Attribute in output");
      Generic_attribute ga=(Generic_attribute)a;
      if (ga.attribute_length > 0) {
        dd.write(ga.info,0,(int)ga.attribute_length);
      }
    }
  }
  return true;
}
