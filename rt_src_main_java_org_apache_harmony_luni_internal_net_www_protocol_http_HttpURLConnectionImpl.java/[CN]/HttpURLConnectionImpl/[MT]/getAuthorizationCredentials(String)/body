{
  int idx=challenge.indexOf(" ");
  String scheme=challenge.substring(0,idx);
  int realm=challenge.indexOf("realm=\"") + 7;
  String prompt=null;
  if (realm != -1) {
    int end=challenge.indexOf('"',realm);
    if (end != -1) {
      prompt=challenge.substring(realm,end);
    }
  }
  PasswordAuthentication pa=Authenticator.requestPasswordAuthentication(getHostAddress(),getHostPort(),url.getProtocol(),prompt,scheme);
  if (pa == null) {
    return null;
  }
  byte[] bytes=(pa.getUserName() + ":" + new String(pa.getPassword())).getBytes("ISO8859_1");
  String encoded=Base64.encode(bytes,"ISO8859_1");
  return scheme + " " + encoded;
}
