{
  if (hostPort < 0) {
    if (proxy != null) {
      hostPort=((InetSocketAddress)proxy.address()).getPort();
    }
 else {
      hostPort=url.getPort();
    }
    if (hostPort < 0) {
      hostPort=defaultPort;
    }
  }
  return hostPort;
}
