{
  boolean lastCr=false;
  StringBuilder result=new StringBuilder(80);
  int c=is.read();
  if (c < 0) {
    return null;
  }
  while (c != '\n') {
    if (lastCr) {
      result.append('\r');
      lastCr=false;
    }
    if (c == '\r') {
      lastCr=true;
    }
 else {
      result.append((char)c);
    }
    c=is.read();
    if (c < 0) {
      break;
    }
  }
  return result.toString();
}
