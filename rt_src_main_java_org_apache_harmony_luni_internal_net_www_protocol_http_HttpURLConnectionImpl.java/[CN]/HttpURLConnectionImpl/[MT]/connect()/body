{
  if (connected) {
    return;
  }
  if (getFromCache()) {
    return;
  }
  try {
    url=new URL(Util.encodeURL(url.toString()));
    uri=url.toURI();
  }
 catch (  URISyntaxException e1) {
  }
  connection=null;
  if (proxy != null) {
    connection=getHTTPConnection(proxy);
  }
 else {
    ProxySelector selector=ProxySelector.getDefault();
    List<Proxy> proxyList=selector.select(uri);
    if (proxyList != null) {
      for (      Proxy selectedProxy : proxyList) {
        if (selectedProxy.type() == Proxy.Type.DIRECT) {
          continue;
        }
        try {
          connection=getHTTPConnection(selectedProxy);
          proxy=selectedProxy;
          break;
        }
 catch (        IOException e) {
          selector.connectFailed(uri,selectedProxy.address(),e);
        }
      }
    }
  }
  if (connection == null) {
    connection=getHTTPConnection(null);
  }
  connection.setSoTimeout(getReadTimeout());
  setUpTransportIO(connection);
  connected=true;
}
