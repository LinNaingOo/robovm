{
  if (closed) {
    throw new IOException(Messages.getString("luni.24"));
  }
  if (limit >= 0) {
    if (limit == 0) {
      throw new IOException(Messages.getString("luni.26"));
    }
    limit--;
  }
  cache.write(data);
  if (writeToSocket && cache.size() >= cacheLength) {
    sendCache(false);
  }
}
