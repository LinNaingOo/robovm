{
  int size=cache.size();
  if (size > 0 || close) {
    if (limit < 0) {
      if (size > 0) {
        output(Integer.toHexString(size) + "\r\n");
        socketOut.write(cache.toByteArray());
        cache.reset();
        output("\r\n");
      }
      if (close) {
        output("0\r\n\r\n");
      }
    }
  }
}
