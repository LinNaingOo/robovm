{
  if (properPath != null) {
    return properPath;
  }
  if (isAbsolute()) {
    byte[] pathBytes=Util.getUTF8Bytes(path);
    return properPath=pathBytes;
  }
  String userdir;
  if (internal) {
    userdir=AccessController.doPrivileged(new PriviAction<String>("user.dir"));
  }
 else {
    userdir=System.getProperty("user.dir");
  }
  if (path.length() == 0) {
    return properPath=Util.getUTF8Bytes(userdir);
  }
  int length=userdir.length();
  if (path.charAt(0) == '\\') {
    if (length > 1 && userdir.charAt(1) == ':') {
      return properPath=Util.getUTF8Bytes(userdir.substring(0,2) + path);
    }
    path=path.substring(1);
  }
  String result=userdir;
  if (userdir.charAt(length - 1) != separatorChar) {
    if (path.charAt(0) != separatorChar) {
      result+=separator;
    }
  }
 else   if (path.charAt(0) == separatorChar) {
    result=result.substring(0,length - 2);
  }
  result+=path;
  return properPath=Util.getUTF8Bytes(result);
}
