{
  StringMarshaler.calls=new ArrayList<String>();
  append("foo","bar");
  assertEquals(10,StringMarshaler.calls.size());
  assertEquals("toNative(foo, ?, 0)",StringMarshaler.calls.get(0));
  assertEquals("toNative(bar, ?, 0)",StringMarshaler.calls.get(1));
  assertEquals("toObject(foo, ?, 1)",StringMarshaler.calls.get(2));
  assertEquals("toObject(bar, ?, 1)",StringMarshaler.calls.get(3));
  assertEquals("updateNative(foo, ?, 1)",StringMarshaler.calls.get(4));
  assertEquals("updateNative(bar, ?, 1)",StringMarshaler.calls.get(5));
  assertEquals("toNative(foobar, ?, 1)",StringMarshaler.calls.get(6));
  assertEquals("updateObject(foo, ?, 0)",StringMarshaler.calls.get(7));
  assertEquals("updateObject(bar, ?, 0)",StringMarshaler.calls.get(8));
  assertEquals("toObject(foobar, ?, 0)",StringMarshaler.calls.get(9));
}
