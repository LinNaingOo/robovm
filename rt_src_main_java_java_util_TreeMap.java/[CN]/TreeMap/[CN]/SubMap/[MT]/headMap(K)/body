{
  Comparator<? super K> cmp=backingMap.comparator;
  if (cmp == null) {
    Comparable<K> object=toComparable(endKey);
    if (hasStart && object.compareTo(startKey) < 0) {
      throw new IllegalArgumentException();
    }
    if (hasEnd && object.compareTo(this.endKey) > 0) {
      throw new IllegalArgumentException();
    }
  }
 else {
    if (hasStart && backingMap.comparator().compare(endKey,startKey) < 0) {
      throw new IllegalArgumentException();
    }
    if (hasEnd && backingMap.comparator().compare(endKey,this.endKey) >= 0) {
      throw new IllegalArgumentException();
    }
  }
  if (hasStart) {
    return new SubMap<K,V>(startKey,backingMap,endKey);
  }
  return new SubMap<K,V>(backingMap,endKey);
}
