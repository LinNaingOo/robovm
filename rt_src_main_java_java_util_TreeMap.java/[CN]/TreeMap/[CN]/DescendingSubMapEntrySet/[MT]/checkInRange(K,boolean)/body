{
  boolean isInRange=true;
  int result=0;
  if (map.toEnd) {
    result=(null != map.comparator()) ? comparator().compare(key,map.hi) : toComparable(key).compareTo(map.hi);
    isInRange=((!map.hiInclusive) && keyInclusive) ? result < 0 : result <= 0;
  }
  if (map.fromStart) {
    result=(null != comparator()) ? comparator().compare(key,map.lo) : toComparable(key).compareTo(map.lo);
    isInRange=isInRange && (((!map.loInclusive) && keyInclusive) ? result > 0 : result >= 0);
  }
  if (!isInRange) {
    throw new IllegalArgumentException();
  }
}
