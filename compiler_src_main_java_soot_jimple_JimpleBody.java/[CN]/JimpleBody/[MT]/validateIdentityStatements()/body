{
  if (method.isAbstract())   return;
  Body body=method.getActiveBody();
  Chain<Unit> units=body.getUnits().getNonPatchingChain();
  boolean foundNonThisOrParamIdentityStatement=false;
  boolean firstStatement=true;
  for (  Unit unit : units) {
    if (unit instanceof IdentityStmt) {
      IdentityStmt identityStmt=(IdentityStmt)unit;
      if (identityStmt.getRightOp() instanceof ThisRef) {
        if (method.isStatic()) {
          throw new RuntimeException("@this-assignment in a static method!");
        }
        if (!firstStatement) {
          throw new RuntimeException("@this-assignment statement should precede all other statements");
        }
      }
 else       if (identityStmt.getRightOp() instanceof ParameterRef) {
        if (foundNonThisOrParamIdentityStatement) {
          throw new RuntimeException("@param-assignment statements should precede all non-identity statements");
        }
      }
 else {
        foundNonThisOrParamIdentityStatement=true;
      }
    }
 else {
      foundNonThisOrParamIdentityStatement=true;
    }
    firstStatement=false;
  }
}
