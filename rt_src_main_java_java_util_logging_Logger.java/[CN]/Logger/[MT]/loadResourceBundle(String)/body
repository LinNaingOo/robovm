{
  ClassLoader cl=AccessController.doPrivileged(new PrivilegedAction<ClassLoader>(){
    public ClassLoader run(){
      return Thread.currentThread().getContextClassLoader();
    }
  }
);
  if (cl != null) {
    try {
      return ResourceBundle.getBundle(resourceBundleName,Locale.getDefault(),cl);
    }
 catch (    MissingResourceException e) {
    }
  }
  cl=AccessController.doPrivileged(new PrivilegedAction<ClassLoader>(){
    public ClassLoader run(){
      return ClassLoader.getSystemClassLoader();
    }
  }
);
  if (cl != null) {
    try {
      return ResourceBundle.getBundle(resourceBundleName,Locale.getDefault(),cl);
    }
 catch (    MissingResourceException e) {
    }
  }
  final Class<?>[] classes=AccessController.doPrivileged(new PrivilegedAction<Class<?>[]>(){
    public Class<?>[] run(){
      return (new PrivateSecurityManager()).privateGetClassContext();
    }
  }
);
  for (int i=1; i < classes.length; i++) {
    final int index=i;
    try {
      cl=AccessController.doPrivileged(new PrivilegedAction<ClassLoader>(){
        public ClassLoader run(){
          return classes[index].getClassLoader();
        }
      }
);
      if (cl == null) {
        continue;
      }
      return ResourceBundle.getBundle(resourceBundleName,Locale.getDefault(),cl);
    }
 catch (    MissingResourceException e) {
    }
  }
  throw new MissingResourceException(Messages.getString("logging.8",resourceBundleName),resourceBundleName,null);
}
