{
switch (type) {
case SECRET:
    if ("RAW".equals(format)) {
      try {
        return new SecretKeySpec(encoded,algorithm);
      }
 catch (      IllegalArgumentException e) {
        throw new NotSerializableException(Messages.getString("security.0B",e));
      }
    }
  throw new NotSerializableException(Messages.getString("security.0C",type,format));
case PUBLIC:
if ("X.509".equals(format)) {
  try {
    KeyFactory kf=KeyFactory.getInstance(algorithm);
    return kf.generatePublic(new X509EncodedKeySpec(encoded));
  }
 catch (  NoSuchAlgorithmException e) {
    throw new NotSerializableException(Messages.getString("security.0D",e));
  }
catch (  InvalidKeySpecException e) {
    throw new NotSerializableException(Messages.getString("security.0D",e));
  }
}
throw new NotSerializableException(Messages.getString("security.0C",type,format));
case PRIVATE:
if ("PKCS#8".equals(format)) {
try {
KeyFactory kf=KeyFactory.getInstance(algorithm);
return kf.generatePrivate(new PKCS8EncodedKeySpec(encoded));
}
 catch (NoSuchAlgorithmException e) {
throw new NotSerializableException(Messages.getString("security.0D",e));
}
catch (InvalidKeySpecException e) {
throw new NotSerializableException(Messages.getString("security.0D",e));
}
}
throw new NotSerializableException(Messages.getString("security.0C",type,format));
}
throw new NotSerializableException(Messages.getString("security.0E",type));
}
