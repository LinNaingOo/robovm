{
  if (done) {
    return;
  }
  def.finish();
  int x=0;
  while (!def.finished()) {
    if (def.needsInput()) {
      def.setInput(buf,0,0);
    }
    x=def.deflate(buf);
    out.write(buf,0,x);
  }
  done=true;
}
