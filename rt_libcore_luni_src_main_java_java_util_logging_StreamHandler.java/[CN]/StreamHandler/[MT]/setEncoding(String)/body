{
  this.flush();
  super.setEncoding(charsetName);
  if (this.writer != null) {
    if (getEncoding() == null) {
      this.writer=new OutputStreamWriter(this.os);
    }
 else {
      try {
        this.writer=new OutputStreamWriter(this.os,getEncoding());
      }
 catch (      UnsupportedEncodingException e) {
        throw new AssertionError(e);
      }
    }
  }
}
