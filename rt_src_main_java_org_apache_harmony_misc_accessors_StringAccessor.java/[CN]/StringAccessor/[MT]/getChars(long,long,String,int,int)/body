{
  String substr=str.substring(start,start + len);
  long addr=getChars(substr);
  Malloc.memcpy(buf,addr,Math.min(buflen,(substr.length() + 1) * 2));
  Malloc.free(addr);
  return buf;
}
