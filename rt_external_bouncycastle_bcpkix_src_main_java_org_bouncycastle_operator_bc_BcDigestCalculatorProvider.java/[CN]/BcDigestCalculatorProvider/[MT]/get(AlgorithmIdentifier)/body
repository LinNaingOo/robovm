{
  Digest dig=digestProvider.get(algorithm);
  final DigestOutputStream stream=new DigestOutputStream(dig);
  return new DigestCalculator(){
    public AlgorithmIdentifier getAlgorithmIdentifier(){
      return algorithm;
    }
    public OutputStream getOutputStream(){
      return stream;
    }
    public byte[] getDigest(){
      return stream.getDigest();
    }
  }
;
}
