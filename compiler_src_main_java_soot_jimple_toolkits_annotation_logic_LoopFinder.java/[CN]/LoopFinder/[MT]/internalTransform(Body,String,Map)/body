{
  g=new ExceptionalUnitGraph(b);
  MHGDominatorsFinder a=new MHGDominatorsFinder(g);
  loops=new HashMap<Stmt,List<Stmt>>();
  Iterator<Unit> stmtsIt=b.getUnits().iterator();
  while (stmtsIt.hasNext()) {
    Stmt s=(Stmt)stmtsIt.next();
    List<Unit> succs=g.getSuccsOf(s);
    Collection<Unit> dominaters=(Collection<Unit>)a.getDominators(s);
    ArrayList<Stmt> headers=new ArrayList<Stmt>();
    Iterator<Unit> succsIt=succs.iterator();
    while (succsIt.hasNext()) {
      Stmt succ=(Stmt)succsIt.next();
      if (dominaters.contains(succ)) {
        headers.add(succ);
      }
    }
    Iterator<Stmt> headersIt=headers.iterator();
    while (headersIt.hasNext()) {
      Stmt header=headersIt.next();
      List<Stmt> loopBody=getLoopBodyFor(header,s);
      if (loops.containsKey(header)) {
        List<Stmt> lb1=loops.get(header);
        loops.put(header,union(lb1,loopBody));
      }
 else {
        loops.put(header,loopBody);
      }
    }
  }
}
