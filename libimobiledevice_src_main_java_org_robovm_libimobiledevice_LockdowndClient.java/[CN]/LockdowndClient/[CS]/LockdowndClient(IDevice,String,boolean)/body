{
  if (device == null) {
    throw new NullPointerException("device");
  }
  LockdowndClientRefOut refOut=new LockdowndClientRefOut();
  try {
    checkResult(handshake ? LibIMobileDevice.lockdownd_client_new_with_handshake(device.getRef(),refOut,label) : LibIMobileDevice.lockdownd_client_new(device.getRef(),refOut,label));
    this.ref=refOut.getValue();
  }
  finally {
    refOut.delete();
  }
}
