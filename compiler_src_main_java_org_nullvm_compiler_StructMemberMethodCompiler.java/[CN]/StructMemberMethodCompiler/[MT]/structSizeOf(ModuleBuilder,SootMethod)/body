{
  SootClass sootClass=method.getDeclaringClass();
  StructureType type=getStructType(sootClass);
  if (type == null) {
    throw new IllegalArgumentException("Struct class " + sootClass + " has no @StructMember annotated methods");
  }
  Function fn=new Function(external,new FunctionAttribute[]{noinline,optsize},mangleMethod(method),getFunctionType(method));
  moduleBuilder.addFunction(fn);
  fn.add(new Ret(sizeof(type)));
}
