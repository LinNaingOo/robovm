{
  if (n < 0) {
    throw new IllegalArgumentException();
  }
  checkClosed();
  int length=(int)(n > Integer.MAX_VALUE ? Integer.MAX_VALUE : n);
  byte[] buffer=new byte[defaultsize > length ? length : defaultsize];
  int skipped=0;
  int count=0;
  while (skipped < length && (count=read(buffer,0,(length - skipped > buffer.length) ? buffer.length : length - skipped)) >= 0) {
    skipped+=count;
  }
  return skipped;
}
