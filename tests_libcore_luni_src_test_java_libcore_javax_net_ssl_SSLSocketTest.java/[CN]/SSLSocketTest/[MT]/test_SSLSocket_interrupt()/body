{
  ServerSocket listening=new ServerSocket(0);
  for (int i=0; i < 3; i++) {
    Socket underlying=new Socket(listening.getInetAddress(),listening.getLocalPort());
    Socket server=listening.accept();
    SSLSocketFactory sf=(SSLSocketFactory)SSLSocketFactory.getDefault();
    Socket clientWrapping=sf.createSocket(underlying,null,-1,true);
switch (i) {
case 0:
      test_SSLSocket_interrupt_case(underlying,underlying);
    break;
case 1:
  test_SSLSocket_interrupt_case(underlying,clientWrapping);
break;
case 2:
test_SSLSocket_interrupt_case(clientWrapping,underlying);
break;
case 3:
test_SSLSocket_interrupt_case(clientWrapping,clientWrapping);
break;
default :
fail();
}
server.close();
underlying.close();
}
listening.close();
}
