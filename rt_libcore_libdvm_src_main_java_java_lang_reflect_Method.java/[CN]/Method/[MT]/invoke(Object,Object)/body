{
  if (!Modifier.isStatic(getModifiers())) {
    Class<?> expectedClass=getDeclaringClass();
    if (receiver == null) {
      StringBuilder sb=new StringBuilder();
      sb.append("expected receiver of type ");
      appendTypeName(sb,expectedClass);
      sb.append(", but got null");
      throw new NullPointerException(sb.toString());
    }
    if (!getDeclaringClass().isInstance(receiver)) {
      StringBuilder sb=new StringBuilder();
      sb.append("expected receiver of type ");
      appendTypeName(sb,expectedClass);
      sb.append(", but got ");
      appendTypeName(sb,receiver.getClass());
      throw new IllegalArgumentException(sb.toString());
    }
  }
  if (args == null) {
    args=EmptyArray.OBJECT;
  }
  Class<?>[] pTypes=getParameterTypes(false);
  if (args.length != pTypes.length) {
    throw new IllegalArgumentException("wrong number of arguments; " + "expected " + pTypes.length + ", got "+ args.length);
  }
  if (!flag) {
    if (!checkAccessibleFast(this)) {
      Class<?> caller=VM.getStackClasses(0,1)[0];
      if (!checkAccessible(caller,this)) {
        throw new IllegalAccessException(String.format("Attempt to access method %s.%s(%s) from class %s",getDeclaringClass().getName(),getName(),toString(pTypes),caller.getName()));
      }
    }
  }
  return internalInvoke(method,pTypes,receiver,args);
}
