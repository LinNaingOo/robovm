{
  out=new PipedOutputStream();
  rt=new Thread(reader=new PReader(out));
  rt.start();
  out.write(testString.getBytes(),0,10);
  assertTrue("Test 1: Bytes have been written before flush.",reader.available() != 0);
  out.flush();
  assertEquals("Test 2: Flush failed. ",testString.substring(0,10),reader.read(10));
}
