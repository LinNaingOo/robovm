{
  if (actual.equals(expected)) {
    return;
  }
  if (actual.equals(VoidType.v()) || expected.equals(VoidType.v())) {
    return;
  }
  if ((isPrimitiveType(actual) || isBoxedType(actual)) && ((isPrimitiveType(expected) || isBoxedType(expected)))) {
    org.objectweb.asm.Type actualAsmType=getAsmPrimitiveType(actual);
    org.objectweb.asm.Type expectedAsmType=getAsmPrimitiveType(expected);
    if (isBoxedType(actual)) {
      caster.unbox(actualAsmType);
    }
    caster.cast(actualAsmType,expectedAsmType);
    if (isBoxedType(expected)) {
      caster.box(expectedAsmType);
    }
  }
 else   if (isPrimitiveType(expected) && actual instanceof RefType) {
    caster.unbox(getAsmPrimitiveType(expected));
  }
 else {
    mv.visitTypeInsn(Opcodes.CHECKCAST,Types.getInternalName(expected));
  }
}
