{
  if (homeDir != null) {
    useHomeDir(homeDir);
    return;
  }
  if (System.getenv("ROBOVM_DEV_ROOT") != null) {
    File dir=new File(System.getenv("ROBOVM_DEV_ROOT"));
    validateDevRootDir(dir);
    binDir=new File(dir,"bin");
    libVmDir=new File(dir,"vm/binaries");
    rtPath=new File(dir,"rt/target/classes");
    return;
  }
  if (System.getenv("ROBOVM_HOME") != null) {
    File dir=new File(System.getenv("ROBOVM_HOME"));
    useHomeDir(dir);
    return;
  }
  List<File> candidates=new ArrayList<File>();
  File userHome=new File(System.getProperty("user.home"));
  candidates.add(new File(userHome,"Applications/robovm"));
  candidates.add(new File(userHome,".robovm/home"));
  candidates.add(new File("/usr/local/lib/robovm"));
  candidates.add(new File("/opt/robovm"));
  candidates.add(new File("/usr/lib/robovm"));
  for (  File dir : candidates) {
    if (dir.exists()) {
      useHomeDir(dir);
      return;
    }
  }
  throw new IllegalArgumentException("ROBOVM_HOME not set and no RoboVM " + "installation found in " + candidates);
}
