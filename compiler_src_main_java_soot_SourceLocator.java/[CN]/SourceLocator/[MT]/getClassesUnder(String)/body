{
  List<String> fileNames=new ArrayList<String>();
  if (isJar(aPath)) {
    List inputExtensions=new ArrayList(2);
    inputExtensions.add(".class");
    inputExtensions.add(".jimple");
    inputExtensions.add(".java");
    try {
      ZipFile archive=new ZipFile(aPath);
      for (Enumeration entries=archive.entries(); entries.hasMoreElements(); ) {
        ZipEntry entry=(ZipEntry)entries.nextElement();
        String entryName=entry.getName();
        int extensionIndex=entryName.lastIndexOf('.');
        if (extensionIndex >= 0) {
          String entryExtension=entryName.substring(extensionIndex);
          if (inputExtensions.contains(entryExtension)) {
            entryName=entryName.substring(0,extensionIndex);
            entryName=entryName.replace('/','.');
            fileNames.add(entryName);
          }
        }
      }
    }
 catch (    IOException e) {
      G.v().out.println("Error reading " + aPath + ": "+ e.toString());
      throw new CompilationDeathException(CompilationDeathException.COMPILATION_ABORTED);
    }
  }
 else {
    File file=new File(aPath);
    File[] files=file.listFiles();
    if (files == null) {
      files=new File[1];
      files[0]=file;
    }
    for (    File element : files) {
      if (element.isDirectory()) {
        List<String> l=getClassesUnder(aPath + File.separatorChar + element.getName());
        Iterator<String> it=l.iterator();
        while (it.hasNext()) {
          String s=it.next();
          fileNames.add(element.getName() + "." + s);
        }
      }
 else {
        String fileName=element.getName();
        if (fileName.endsWith(".class")) {
          int index=fileName.lastIndexOf(".class");
          fileNames.add(fileName.substring(0,index));
        }
        if (fileName.endsWith(".jimple")) {
          int index=fileName.lastIndexOf(".jimple");
          fileNames.add(fileName.substring(0,index));
        }
        if (fileName.endsWith(".java")) {
          int index=fileName.lastIndexOf(".java");
          fileNames.add(fileName.substring(0,index));
        }
      }
    }
  }
  return fileNames;
}
