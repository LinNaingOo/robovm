{
  int sz=(int)size;
  byte[] buf=new byte[sz];
  final int N=1024;
  int ln=0;
  int count=0;
  while (sz > 0 && (ln=is.read(buf,count,Math.min(N,sz))) != -1) {
    count+=ln;
    sz-=ln;
  }
  return new ByteArrayInputStream(buf);
}
