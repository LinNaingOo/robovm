{
  DatagramChannel server=DatagramChannel.open();
  InetSocketAddress addr=new InetSocketAddress("localhost",0);
  server.socket().bind(addr);
  SocketAddress boundedAddress=server.socket().getLocalSocketAddress();
  DatagramChannel client=DatagramChannel.open();
  ByteBuffer sent=ByteBuffer.allocate(1024);
  sent.put("test".getBytes());
  sent.flip();
  client.send(sent,boundedAddress);
  assertTrue(client.socket().isBound());
  server.close();
  client.close();
}
