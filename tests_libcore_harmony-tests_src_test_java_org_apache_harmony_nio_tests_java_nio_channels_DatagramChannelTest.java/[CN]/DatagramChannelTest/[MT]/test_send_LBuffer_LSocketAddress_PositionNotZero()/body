{
  int CAPACITY_NORMAL=256;
  int position=16;
  DatagramChannel dc=DatagramChannel.open();
  byte[] sourceArray=new byte[CAPACITY_NORMAL];
  ByteBuffer sourceBuf=ByteBuffer.wrap(sourceArray);
  sourceBuf.position(position);
  int ret=dc.send(sourceBuf,localAddr1);
  assertEquals(CAPACITY_NORMAL - position,ret);
  assertEquals(CAPACITY_NORMAL,sourceBuf.position());
}
