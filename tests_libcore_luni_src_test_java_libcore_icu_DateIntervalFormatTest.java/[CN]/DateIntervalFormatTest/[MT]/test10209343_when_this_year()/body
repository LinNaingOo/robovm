{
  Locale l=Locale.US;
  TimeZone utc=TimeZone.getTimeZone("UTC");
  Calendar c=Calendar.getInstance(utc,l);
  c.set(Calendar.MONTH,Calendar.FEBRUARY);
  c.set(Calendar.DAY_OF_MONTH,10);
  c.set(Calendar.HOUR_OF_DAY,0);
  long thisYear=c.getTimeInMillis();
  assertEquals("February 10",formatDateRange(l,utc,thisYear,thisYear,FORMAT_SHOW_DATE));
  assertEquals(String.format("February 10, %d",c.get(Calendar.YEAR)),formatDateRange(l,utc,thisYear,thisYear,FORMAT_SHOW_DATE | FORMAT_SHOW_YEAR));
  Calendar c2=(Calendar)c.clone();
  c2.set(Calendar.YEAR,1980);
  long oldYear=c2.getTimeInMillis();
  assertEquals("February 10, 1980",formatDateRange(l,utc,oldYear,oldYear,FORMAT_SHOW_DATE));
  assertEquals("February 10",formatDateRange(l,utc,oldYear,oldYear,FORMAT_SHOW_DATE | FORMAT_NO_YEAR));
  assertEquals(String.format("February 10, 1980 ??? February 10, %d",c.get(Calendar.YEAR)),formatDateRange(l,utc,oldYear,thisYear,FORMAT_SHOW_DATE));
  assertEquals(String.format("February 10, 1980 ??? February 10, %d",c.get(Calendar.YEAR)),formatDateRange(l,utc,oldYear,thisYear,FORMAT_SHOW_DATE | FORMAT_NO_YEAR));
}
