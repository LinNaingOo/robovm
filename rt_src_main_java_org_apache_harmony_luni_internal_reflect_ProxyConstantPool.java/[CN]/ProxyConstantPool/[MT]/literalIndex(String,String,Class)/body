{
  int index;
  String key=declaringClass + "." + name;
  if ((index=fieldCache.get(key)) < 0) {
    int classIndex=typeIndex(declaringClass);
    int nameAndTypeIndex=literalIndexForNameAndType(literalIndex(name.toCharArray()),literalIndex(ProxyClassFile.getConstantPoolName(clazz)));
    index=fieldCache.put(key,currentIndex++);
    writeU1(FieldRefTag);
    writeU2(classIndex);
    writeU2(nameAndTypeIndex);
  }
  return index;
}
