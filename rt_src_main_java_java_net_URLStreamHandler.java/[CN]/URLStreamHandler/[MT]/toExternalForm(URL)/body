{
  StringBuilder answer=new StringBuilder();
  answer.append(url.getProtocol());
  answer.append(':');
  String authority=url.getAuthority();
  if (authority != null && authority.length() > 0) {
    answer.append("//");
    answer.append(url.getAuthority());
  }
  String file=url.getFile();
  String ref=url.getRef();
  if (file != null) {
    answer.append(file);
  }
  if (ref != null) {
    answer.append('#');
    answer.append(ref);
  }
  return answer.toString();
}
