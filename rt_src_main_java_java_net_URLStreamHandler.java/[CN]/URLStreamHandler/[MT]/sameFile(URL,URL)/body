{
  String s1=url1.getProtocol();
  String s2=url2.getProtocol();
  if (s1 != s2 && (s1 == null || !s1.equals(s2))) {
    return false;
  }
  s1=url1.getFile();
  s2=url2.getFile();
  if (s1 != s2 && (s1 == null || !s1.equals(s2))) {
    return false;
  }
  if (!hostsEqual(url1,url2)) {
    return false;
  }
  int p1=url1.getPort();
  if (p1 == -1) {
    p1=getDefaultPort();
  }
  int p2=url2.getPort();
  if (p2 == -1) {
    p2=getDefaultPort();
  }
  return p1 == p2;
}
