{
  if (handle == 0) {
    return null;
  }
  long typeId=getTypeID(handle);
  Class<? extends CFType> cfTypeClass=allCFTypeClasses.get(typeId);
  if (cfTypeClass != null && cfTypeClass != cls) {
    if (cls.isAssignableFrom(cfTypeClass)) {
      cls=cfTypeClass;
    }
  }
  CFType o=(CFType)NativeObject.Marshaler.toObject(cls,handle,flags);
  if (retain) {
    retain(handle);
  }
  return o;
}
