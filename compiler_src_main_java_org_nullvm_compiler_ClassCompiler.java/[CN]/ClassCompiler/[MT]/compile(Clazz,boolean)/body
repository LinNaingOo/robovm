{
  reset();
  File llFile=config.getLlFile(clazz);
  File bcFile=config.getBcFile(clazz);
  File sFile=config.getSFile(clazz);
  File oFile=config.getOFile(clazz);
  llFile.getParentFile().mkdirs();
  bcFile.getParentFile().mkdirs();
  sFile.getParentFile().mkdirs();
  oFile.getParentFile().mkdirs();
  boolean recompiled=false;
  if (force || config.isClean() || !llFile.exists()|| llFile.lastModified() < clazz.lastModified()) {
    OutputStream out=null;
    try {
      config.getLogger().debug("Compiling %s",clazz);
      out=new FileOutputStream(llFile);
      compile(clazz,out);
      recompiled=true;
    }
 catch (    Throwable t) {
      FileUtils.deleteQuietly(llFile);
      if (t instanceof IOException) {
        throw (IOException)t;
      }
      if (t instanceof RuntimeException) {
        throw (RuntimeException)t;
      }
      throw new RuntimeException(t);
    }
 finally {
      IOUtils.closeQuietly(out);
    }
  }
  if (force || config.isClean() || !bcFile.exists()|| bcFile.lastModified() < llFile.lastModified()) {
    config.getLogger().debug("Optimizing %s",clazz);
    CompilerUtil.opt(config,llFile,bcFile,"-mem2reg","-always-inline");
  }
  if (force || config.isClean() || !sFile.exists()|| sFile.lastModified() < bcFile.lastModified()) {
    config.getLogger().debug("Generating %s assembly for %s",config.getArch(),clazz);
    CompilerUtil.llc(config,bcFile,sFile);
  }
  if (force || config.isClean() || !oFile.exists()|| oFile.lastModified() < sFile.lastModified()) {
    config.getLogger().debug("Assembling %s",clazz);
    CompilerUtil.assemble(config,sFile,oFile);
  }
  return recompiled;
}
