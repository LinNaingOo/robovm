{
synchronized (lock) {
    if (buf == null) {
      throw new IOException(Messages.getString("luni.24"));
    }
    if (length > pos) {
      throw new IOException(Messages.getString("luni.D3"));
    }
    if (offset > buffer.length - length || offset < 0) {
      throw new ArrayIndexOutOfBoundsException(Messages.getString("luni.12",offset));
    }
    if (length < 0) {
      throw new ArrayIndexOutOfBoundsException(Messages.getString("luni.18",length));
    }
    for (int i=offset + length - 1; i >= offset; i--) {
      unread(buffer[i]);
    }
  }
}
