{
  Set<LocalVariable> lvs=new HashSet<>();
  if (local.getIndex() != -1) {
    boolean incompatibleType=false;
    String firstType=null;
    for (    ValueBox box : web) {
      LocalVariable lv=findLocalVariable(body,local.getIndex(),boxToUnit.get(box));
      if (lv != null) {
        lvs.add(lv);
        if (expectedTypeDescriptor != null && lv.getDescriptor().equals(expectedTypeDescriptor)) {
          incompatibleType=true;
        }
        if (firstType == null) {
          firstType=lv.getDescriptor();
        }
 else         if (!firstType.equals(lv.getDescriptor())) {
          incompatibleType=true;
        }
      }
    }
    if (incompatibleType) {
      lvs.clear();
      return lvs;
    }
    if (lvs.size() > 1) {
      String name=null;
      for (      LocalVariable lv : lvs) {
        if (name == null) {
          name=lv.getName();
        }
 else {
          if (!lv.getName().equals(name)) {
            throw new IllegalStateException("Found LocalVariables do " + "not refer to a variable with the same name: " + lvs);
          }
        }
      }
    }
  }
  return lvs;
}
