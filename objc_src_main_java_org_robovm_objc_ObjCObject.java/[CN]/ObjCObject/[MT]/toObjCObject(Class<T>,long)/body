{
  if (handle == 0L) {
    return null;
  }
  T o=getPeerObject(handle);
  if (o != null && o.getHandle() != 0) {
    return o;
  }
  ObjCClass fallback=ObjCClass.getByType(cls);
  ObjCClass objCClass=ObjCClass.getFromObject(handle,fallback);
  Class<T> c=(Class<T>)objCClass.getType();
  if (c == ObjCClass.class) {
    return (T)objCClass;
  }
  o=VM.allocateObject(c);
  o.setHandle(handle);
  AssociatedObjectHelper.setPeerObject(handle,o);
  if (objCClass.isCustom()) {
    VM.setBoolean(VM.getObjectAddress(o) + CUSTOM_CLASS_OFFSET,true);
  }
  o.afterMarshaled();
  return o;
}
