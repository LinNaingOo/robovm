{
  ReferenceIntegerPair<V> current=atomicRef.get();
  return expectedReference == current.reference && expectedStamp == current.integer && ((newReference == current.reference && newStamp == current.integer) || atomicRef.weakCompareAndSet(current,new ReferenceIntegerPair<V>(newReference,newStamp)));
}
