{
  ClientSessionContext context=new ClientSessionContext();
  ValidSSLSession a=new ValidSSLSession("a");
  ValidSSLSession b=new ValidSSLSession("b");
  ValidSSLSession c=new ValidSSLSession("c");
  ValidSSLSession d=new ValidSSLSession("d");
  context.putSession(a);
  assertSessionContextContents(context,new SSLSession[]{a},new SSLSession[]{b,c,d});
  context.putSession(b);
  assertSessionContextContents(context,new SSLSession[]{a,b},new SSLSession[]{c,d});
  context.putSession(c);
  assertSessionContextContents(context,new SSLSession[]{a,b,c},new SSLSession[]{d});
  context.putSession(d);
  assertSessionContextContents(context,new SSLSession[]{a,b,c,d},new SSLSession[0]);
  context.setSessionCacheSize(2);
  assertSessionContextContents(context,new SSLSession[]{c,d},new SSLSession[]{a,b});
}
