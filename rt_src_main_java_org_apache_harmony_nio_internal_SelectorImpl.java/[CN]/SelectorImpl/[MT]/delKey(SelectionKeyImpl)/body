{
  int index=sk.getIndex();
  keys[index]=null;
  int readableIndex=keysToReadableFDs[index];
  if (readableIndex != -1) {
    readableFDs[readableIndex]=null;
    readableFDsToKeys[readableIndex]=-1;
    keysToReadableFDs[index]=-1;
  }
  int writableIndex=keysToWritableFDs[index];
  if (writableIndex != -1) {
    writableFDs[writableIndex]=null;
    writableFDsToKeys[writableIndex]=-1;
    keysToWritableFDs[index]=-1;
  }
  if (keys[lastKeyIndex] != null) {
    keys[index]=keys[lastKeyIndex];
    keys[lastKeyIndex]=null;
    keys[index].setIndex(index);
    keysToReadableFDs[index]=keysToReadableFDs[lastKeyIndex];
    keysToWritableFDs[index]=keysToWritableFDs[lastKeyIndex];
    if (keysToReadableFDs[index] != -1) {
      readableFDsToKeys[keysToReadableFDs[index]]=index;
    }
    if (keysToWritableFDs[index] != -1) {
      writableFDsToKeys[keysToWritableFDs[index]]=index;
    }
  }
  lastKeyIndex--;
  if (readableIndex != -1) {
    if (readableFDs[readableKeysCount - 1] != null) {
      readableFDs[readableIndex]=readableFDs[readableKeysCount - 1];
      readableFDsToKeys[readableIndex]=readableFDsToKeys[readableKeysCount - 1];
      if (readableFDsToKeys[readableIndex] != -1) {
        keysToReadableFDs[readableFDsToKeys[readableIndex]]=readableIndex;
      }
    }
    readableKeysCount--;
  }
  if (writableIndex != -1) {
    if (writableFDs[writableKeysCount - 1] != null) {
      writableFDs[writableIndex]=writableFDs[writableKeysCount - 1];
      writableFDsToKeys[writableIndex]=writableFDsToKeys[writableKeysCount - 1];
      if (writableFDsToKeys[writableIndex] != -1) {
        keysToWritableFDs[writableFDsToKeys[writableIndex]]=writableIndex;
      }
    }
    writableKeysCount--;
  }
}
