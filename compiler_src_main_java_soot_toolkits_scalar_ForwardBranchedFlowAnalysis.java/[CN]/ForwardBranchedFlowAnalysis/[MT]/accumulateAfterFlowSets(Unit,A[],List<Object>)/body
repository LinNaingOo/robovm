{
  int repCount=0;
  previousAfterFlows.clear();
  if (s.fallsThrough()) {
    copy(unitToAfterFallFlow.get(s).get(0),flowRepositories[repCount]);
    previousAfterFlows.add(flowRepositories[repCount++]);
  }
  if (s.branches()) {
    List<A> l=(unitToAfterBranchFlow.get(s));
    Iterator<A> it=l.iterator();
    while (it.hasNext()) {
      A fs=(it.next());
      copy(fs,flowRepositories[repCount]);
      previousAfterFlows.add(flowRepositories[repCount++]);
    }
  }
}
