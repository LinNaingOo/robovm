{
  long refcon=refconId.getAndIncrement();
  CFMessagePortContext context=new CFMessagePortContext();
  context.setInfo(refcon);
  BooleanPtr ptr=new BooleanPtr();
  CFMessagePort result=createLocal(null,name,new FunctionPtr(cbPort),context,ptr);
  if (result != null) {
synchronized (portCallbacks) {
      portCallbacks.put(refcon,callback);
    }
  }
  return result;
}
