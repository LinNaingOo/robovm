{
  FlowSet in=(FlowSet)inValue, out=(FlowSet)outValue;
  Unit unit=(Unit)d;
  List defBoxes=unit.getDefBoxes();
  if (!defBoxes.isEmpty()) {
    if (!(defBoxes.size() == 1))     throw new RuntimeException("SimpleLocalDefs: invalid number of def boxes");
    Value value=((ValueBox)defBoxes.get(0)).getValue();
    if (value instanceof Local) {
      Local defLocal=(Local)value;
      in.intersection(localToPreserveSet.get(defLocal),out);
      out.add(unit,out);
    }
 else {
      in.copy(out);
      return;
    }
  }
 else   in.copy(out);
}
