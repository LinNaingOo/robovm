{
  if (bufOff == maxBuf) {
    if (nextChunk() < 0) {
      return -1;
    }
  }
  int available=maxBuf - bufOff;
  if (len > available) {
    System.arraycopy(buf,bufOff,b,off,available);
    bufOff=maxBuf;
    return available;
  }
 else {
    System.arraycopy(buf,bufOff,b,off,len);
    bufOff+=len;
    return len;
  }
}
